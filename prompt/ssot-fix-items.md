# SSOT 정합성 점검 후 수정 요청 프롬프트

- 다음 레거시 문서들(SSOT)을 기반으로 점검 대상 문서들을 점검하고, 수정 사항들을 나열한 문서임.

## SSOT (Single Source of Truth) - 레거시 문서
1. `/Users/whchoi/dev/my-five-tiger-generals-legacy/docs/prd.md` - PRD (제품 요구사항 문서)
2. `/Users/whchoi/dev/my-five-tiger-generals-legacy/docs/rules.md` - 게임 규칙서
3. `/Users/whchoi/dev/my-five-tiger-generals-legacy/docs/tatic.md` - 책략 시스템 상세
4. `/Users/whchoi/dev/my-five-tiger-generals-legacy/docs/temp-0905.md` - 추가 기획 메모

## 점검 대상 - 현재 프로젝트 계획 문서
1. `/Users/whchoi/dev/five-tiger-generals/docs/project-plan/01-project-overview.md`
2. `/Users/whchoi/dev/five-tiger-generals/docs/project-plan/02-game-rules.md`
3. `/Users/whchoi/dev/five-tiger-generals/docs/project-plan/03-technical-architecture.md`
4. `/Users/whchoi/dev/five-tiger-generals/docs/project-plan/04-development-roadmap.md`
5. `/Users/whchoi/dev/five-tiger-generals/docs/project-plan/05-backlog.md`
6. `/Users/whchoi/dev/five-tiger-generals/docs/project-plan/06-ui-page-flow.md`

## SSOT 기반 규칙 수정·정리 항목

- 아래 항목들을 기준으로 `docs/project-plan/02-game-rules.md` 문서를 수정할 것.
- 필요하다면, `docs/project-plan/` 내부의 다른 문서들도 수정할 것.

---

### 1. 행동력 시스템

- **최종 규칙**
  - 턴당 **2개 행동**을 기본으로 한다.
  - 단, 추후 밸런싱/커스터마이징을 위해 **하드코딩 금지**.
- **설계 요구사항**
  - `MAX_ACTION_COUNT = 2` 형태로 **상수로 정의**하고, 이 값을 **설정/주입**받아 사용하는 구조로 설계한다.
    - 예: 설정 파일, DI 컨테이너, 게임 모드별 설정 등에서 주입.
  - 룰/문서 상 표현도 "2개"를 고정 문구로 남기기보다, "기본 행동력(현재 2)"처럼 **변경 가능성을 암시**하는 서술 사용.

---

### 2. 스탯 명칭 및 의미 – "별(Star)"

- **명칭**
  - "성(Star)"가 아니라 **"별(Star)"**이 맞는 표현.
- **의미**
  - 별 스탯은 **방어력이 아니라 통솔력(병력 상한)**을 의미한다.
  - 정의: `⭐ 별 (통솔력) = 1~5개, 별 1개당 병력 2단위까지 통솔 가능`(SSOT 기준).
- **조치**
  - 모든 문서에서 **방어력/특수 능력으로 기술된 "성(Star)" 설명을 삭제 또는 수정**.
  - 별 스탯을 사용하는 곳에서는 **병력 상한/통솔력과의 관계**만 기술한다.

---

### 3. 전투 계산식 (해/달 라인 전투)

- **최종 규칙**
  - 해/달 라인 전투에서는 **전투 방향에 맞는 공격력으로만 비교**한다.
  - **방어력 개념은 존재하지 않는다.**
  - 피해 계산식: `피해 = 공격자 공격력(방향별) - 수비자 공격력(해/달 방향 기준)`.
- **조치**
  - "공격력 vs 방어력(Star)" 같은 표현을 모두 삭제/수정.
  - 전투 관련 테이블/예시는 **공격력 vs 공격력 비교**로 통일한다.

---

### 4. 보급 시스템

- **최종 규칙**
  - 보급 시스템은 **SSOT 규칙을 그대로 따른다.**
  - 핵심 요소:
    - `[이동]`으로 아군과 포개면 보급 수행.
    - 보급을 위해 **복귀 대기** 상태가 되며, **1턴 후 자동 복귀**.
    - 보급 복귀에는 **OUT 카운트가 적용되지 않는다.**
- **조치**
  - 단순히 "아군 타일을 지나갈 때 일부 회복" 형태로 축약한 설명은 제거.
  - "복귀 대기" 및 "자동 복귀", "OUT 카운트 미적용"을 포함한 **풀 시스템**을 문서와 룰에 명시.

---

### 5. 전멸·와해·패전 처리

#### 5-1. 전멸 / 와해 정의

- **전멸**
  - **장수 하나**의 병력이 0이 되는 상태를 "전멸"로 정의한다.
  - **첫 번째 전멸**: 해당 장수는 패전 처리 후 **복귀**한다.
  - **두 번째 전멸**: 해당 장수는 인게임에서 **완전 퇴장(전사)**한다.
- **와해**
  - 아군 측의 **모든 장수가 완전 퇴장**된 상태를 "와해"로 정의한다.
  - 전멸과 와해는 **서로 다른 개념**이며, 승리 조건에서도 구분 가능해야 한다.

#### 5-2. 패전 처리와 스탯 감소

- **최종 규칙**
  - **스탯 감소 패널티는 존재하지 않는다.**
  - 초기 기획에는 "최초 전멸 시 스탯 1점 감소"가 있었으나, **의도적으로 제거된 상태가 최종안**이다.
- **동작 요약**
  - 최초 전멸(병력 0) → **패전 처리 후 복귀**, 스탯 감소 없음.
  - 두 번째 전멸 → **해당 장수 완전 퇴장**.
- **조치**
  - `PRD` 등에서 스탯 감소(별/발/해/달 -1) 관련 서술은 모두 삭제 또는 "폐기된 안"으로 정정.
  - SSOT와 PRD 간의 패전 규칙 불일치를 **위 규칙으로 통일**한다.

---

### 6. 노크 규칙

- **최종 규칙**
  - **끝 칸(상대의 첫 칸)**에 도달한 것만으로는 노크가 아니다.
  - 끝 칸에 도달한 이후, **별도의 행동 1개를 소비**해서 "노크"를 수행해야 한다.
  - 행동력을 모두 사용해 끝 칸에 도달했다면, 그 턴에는 **노크 불가**.
- **조치**
  - "끝 행/끝 칸 도달 = 자동 노크"로 서술된 부분을 모두 수정.
  - "도달"과 "노크(행동 소비)"를 **명확히 분리하여 규칙/예시를 재작성**한다.

---

### 7. [모의] 액션, 이탈·패스, 책략 시스템

- **최종 의도**
  - [모의] 액션을 통해 **책략 1가지를 사용할 수 있는 구조**가 맞다.
  - `이탈(Disengage)`와 `패스(Pass)`는 **SSOT에 없는 개념**이며, 기존 문서에서 **할루시네이션으로 잘못 생성된 것**으로 간주한다.
- **Phase별 처리**
  - **Phase 1/2 (MVP)**:
    - 실제 책략 효과는 구현하지 않더라도, **[모의]의 예비 슬롯만 UI와 규칙에 표시**한다.
    - 플레이어가 향후 책략 시스템이 들어올 자리를 이해할 수 있게 하는 수준.
  - **Phase 3**:
    - SSOT와 `tatic.md`에 정의된 **모든 책략 내용을 실제 구현**한다.
    - [모의] 액션 → 장수당 장착한 3개 책략 표시 → 1개 선택 사용 → 행동력 1 소모 흐름을 구현.
- **조치**
  - 문서에서 `이탈`, `패스`를 **핵심 액션으로 나열한 부분은 제거/축소**.
  - 액션 목록은 기본적으로 `[이동] / [공격] / [모의]`를 기준으로 재정리한다.

---

### 8. 디자인 스타일

- **변경 이력**
  - 초기: "흰 배경 + 검은 먹선 + 캐릭터별 컬러" 스타일을 고려했음.
  - 현재: **삼국지 영걸전 같은 느낌의 픽셀 아트 스타일**로 변경하기로 **논의 완료**.
- **조치**
  - PRD 및 UI 기획서에서 **구 스타일 서술을 픽셀 아트 방향으로 업데이트**.
  - 색감/명암/타일 디자인 등은 "레트로 픽셀 아트 삼국지 전술 RPG" 느낌을 기준으로 상세화.

---

### 9. 유닛 연속 행동 제약

- **최종 규칙**
  - **유지**: 같은 유닛이 **같은 행동을 2번 이상 연속 수행할 수 없음.**
  - **완화**: "공격/모의 후 추가 이동 불가" 규칙은 **의도적으로 제거**한다.
- **조치**
  - SSOT에 있는 "공격/모의 후 추가 이동 불가" 문구는 **현재 규칙에 맞게 폐기 또는 주석 처리**.
  - 구현 시에는 "연속 동일 행동 금지"만 체크하도록 로직을 단순화한다.

