# HUD 개선 보고서: 목업 vs 현재 구현 비교

---

## 1. 레이아웃 구조 (가장 큰 차이)

| 항목 | 현재 구현 | 목업 |
|------|-----------|------|
| 보드 영역 | 우측 사이드바(200px)에 의해 축소 | 전체 화면 사용 |
| 정보 배치 | 사이드바 내 수직 정렬 | 보드 오버레이 + 하단 장수 패널 |
| 모바일 대응 | 3-breakpoint 분기 (모바일/태블릿/데스크톱) | 단일 세로형 레이아웃 |

합의 필요:

- 사이드바를 완전 제거하고 보드를 전체 화면으로 확장할 것인지?
- 데스크톱에서도 동일 레이아웃인지, 데스크톱은 현행 유지인지?

---

## 2. 장수 패널 (핵심 변경)

| 항목 | 현재 구현 | 목업 |
|------|-----------|------|
| 표시 장수 수 | 1명 (선택 시에만) | 5명 (항상 표시) |
| 위치 | 사이드바 중앙 / 모바일 드로어 | 최하단 고정 패널 |
| 정보 | 풀 스탯 4개 + 병력 바 | 축약 (별/해/달 + 병력 바) |

목업의 장수 패널은 5명의 초상화 + 별 스탯 + 해/달 아이콘 + 병력 바를 가로로 배치합니다. 선택된 장수 아래에 이름("유비")이 표시됩니다.

합의 필요:

- 모바일 320px에서 5장 카드 크기 (최소 카드 너비 56~64px)
- 발(Speed) 스탯 생략 여부 (목업에 안 보임)
- 패널에서 장수 탭 <-> 보드 클릭 양방향 선택 지원?
- OUT/전사 장수 패널 표시 방식 (어둡게? X표시? 빈 슬롯?)
- 장수 초상화 에셋 준비 상태 (현재 이모지만 사용 중)

---

## 3. 노크 카운트 배치

| 항목 | 현재 구현 | 목업 |
|------|-----------|------|
| 위치 | 사이드바 + 모바일 정보바 + 노크 버튼 (3곳 중복) | 보드 위/아래 중앙 (각 1곳) |
| 형태 | 금색 사각형 도트 | 빨간 원형 도트 |

합의 필요:

- 3중 중복 제거 → 보드 오버레이로 통합?
- 빨간 도트 색상 확정 (상대=빨강, 내=다른 색?)
- 구현 방식: React absolute 오버레이 vs Phaser 내부 UI?

---

## 4. 액션 버튼

| 항목 | 현재 구현 | 목업 |
|------|-----------|------|
| 버튼 수 | 5개 (노크/책략/설정/항복/턴종료) | 2개 (책/찻잔 아이콘) |
| 표현 | 텍스트 + 아이콘 | 아이콘만 |
| 레이아웃 | 52px 하단 바 | 보드 좌/우 하단 모서리 플로팅 |

합의 필요 (CRITICAL):

- 턴 종료 버튼: 목업에 없음. 행동력 소진 시 자동 종료만? 수동 턴 넘기기 UI는?
- 노크 버튼: 목업에 없음. 조건 충족 시 보드 내 팝업으로 표시?
- 설정 접근: 목업에 없음. 장수 패널 영역에 배치? 햄버거 메뉴?
- 찻잔 = 항복 맞는지 기획자 확인 필요
- 아이콘 전용 버튼의 접근성(aria-label, 툴팁) 대책

---

## 5. 턴/타이머 정보

목업에 턴 번호, 60초 타이머, 행동 카운터가 모두 보이지 않습니다.

합의 필요 (CRITICAL):

- 60초 턴 타이머 위치: 보드 상단 오버레이? 노크 도트 옆?
- 행동 카운터(남은 행동 횟수) 위치: 장수 패널 위?
- 목업에서 의도적 생략인지, 아직 넣지 않은 것인지 확인 필요

---

## 6. 게임 규칙과의 정합성 문제

### ~~P0 - 행동력 불일치~~ (해결됨)

- 규칙 문서: "턴당 행동력(현재 2)" (02-game-rules.md 라인 105) ← **문서가 틀림**
- 코드 상수: ACTIONS_PER_TURN = 3 (game-core/constants/game.ts) ← **코드가 맞음**
- ActionCounter 기본값: maxActions = 3

**결론: 행동력은 3이 맞음.** 규칙 문서(02-game-rules.md)를 3으로 수정 필요.

### P1 - 교착(Engagement) 상태 UI 전무

교착은 전선 공격의 핵심 메커니즘인데, 현재:

- GeneralStatus 타입에 'engaged' 상태 없음
- 교착 상태 시각적 표시 UI 없음
- 이탈 시 피해 2를 예상할 수 없는 UX 문제

### P2 - 병력 표시 (수정 확인됨)

현재 {troops}/{star}로 표시 중인데, 규칙상 병력 상한 = star × 2. 관우(별 5)가 10/5로 표시되면 200%처럼 보입니다. **10/10이 맞음. 코드 수정 필요.**

---

## 7. 정보 밀도

**현재 과다:**

- 노크 카운트 3곳 중복
- 플레이어 이름 반복 표시

**현재 부족:**

- 교착 상태 표시 (전무)
- 이동 중 남은 이동 포인트
- 상대 장수 스탯 접근 경로
- 전멸 횟수(OUT 카운트) 표시
- 선택 장수의 가능한 행동 표시

**목업에서 개선된 점:**

- 5명 장수 전체 현황을 한눈에 파악
- 장수별 병력 바 동시 비교 가능

---

## 8. 합의된 결정사항 (2026-02-14)

### P0 - 행동력: 3이 맞음 (해결됨)

- **결론**: 턴당 행동력은 **3**이 정확함. 코드(`ACTIONS_PER_TURN = 3`)가 맞고, 규칙 문서(`02-game-rules.md` 라인 105: "행동력(현재 2)")가 틀림.
- **조치**: 규칙 문서를 3으로 수정 필요.
- **영향 파일**: `docs/project-plan/02-game-rules.md`

### P2 - 병력 표시: 수정 필요 (확인됨)

- **결론**: 병력 상한은 `star × 2`이므로, 표시를 `troops/star` → `troops/(star × 2)`로 수정해야 함.
- **예시**: 관우(별 5)의 최대 병력은 10. 현재 `10/5`로 표시 → `10/10`으로 수정.
- **영향 파일**:
  - `apps/web/src/components/game/SidePanel.tsx` (라인 92-93, 145)
  - `apps/web/src/components/game/MobileGeneralDrawer.tsx` (라인 35-36, 111)
  - `apps/web/src/components/game/GeneralStatsPanel.tsx` (라인 158, 254-255)
- **수정 내용**: `general.stats.star`를 `general.stats.star * 2`로 변경 (표시 및 비율 계산 모두)

---

## 요약: 우선순위별 액션 아이템

| 우선순위 | 항목 | 유형 |
|----------|------|------|
| ~~P0~~ | ~~행동력 2 vs 3 확정~~ → **3 확정 (규칙 문서 수정 필요)** | ✅ 해결됨 |
| P0 | 목업 적용 범위 확정 (모바일만? 전체?) | 기획자 확인 |
| P1 | 목업에 없는 필수 UI 배치 합의 (타이머/행동카운터/턴종료/노크/설정) | 기획자 확인 |
| P1 | 장수 패널 상세 사양 (카드 크기/스탯 범위/인터랙션/상태 표시) | 기획자 확인 |
| P1 | 교착 상태 UI 설계 | 신규 설계 필요 |
| P2 | 노크 도트 색상/형태/위치 확정 | 기획자 확인 |
| P2 | 병력 표시 troops/star → troops/(star×2) 수정 | ✅ 확인됨 (코드 수정 대기) |
| P3 | 장수 초상화 에셋 의존성 확인 | 아트 담당자 확인 |
