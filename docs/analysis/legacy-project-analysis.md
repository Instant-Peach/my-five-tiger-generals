# Legacy Project Analysis: my-five-tiger-generals-legacy

> 분석일: 2026-02-02
> 경로: `/Users/whchoi/dev/my-five-tiger-generals-legacy/`

---

## 1. 프로젝트 개요

**유형**: 단일 앱 데모 버전 (Monolith SPA)
**목적**: 게임 로직 및 기획 검증용 프로토타입
**상태**: 개발 중단 (Phase 2 진행 중 일시정지)

---

## 2. 기술 스택

| 카테고리 | 기술 | 버전 |
|---------|------|------|
| **프레임워크** | React | 19.1.1 |
| **언어** | TypeScript | 5.8.3 |
| **게임 엔진** | Phaser | 3.90.0 |
| **상태관리** | Zustand | 5.0.8 |
| **빌드 도구** | Vite | 7.1.2 |
| **배포** | GitHub Pages | gh-pages 6.3.0 |

### 추가 라이브러리
- `phaser3-rex-plugins` 1.80.16 - 아웃라인 파이프라인 등 확장 기능
- `ESLint` 9.33.0 + `Prettier` 3.6.2 - 코드 품질 관리

---

## 3. 프로젝트 구조

```
my-five-tiger-generals-legacy/
├── src/
│   ├── game-core/           # 순수 게임 로직 엔진
│   │   ├── engine.ts        # 핵심 게임 로직 (~410 lines)
│   │   ├── types.ts         # 타입 정의 (~180 lines)
│   │   └── store/           # Zustand 스토어
│   │       ├── gameStore.ts
│   │       └── selectors.ts
│   ├── game/                # Phaser 비주얼 레이어
│   │   ├── components/      # Board.ts, TriangleTile.ts
│   │   ├── entities/        # Piece.ts
│   │   ├── systems/         # BoardGraph.ts (~375 lines), TileManager.ts
│   │   └── scenes/          # MainScene.ts
│   ├── components/          # React UI 컴포넌트
│   │   ├── Game.tsx
│   │   └── GameUI.tsx
│   ├── App.tsx
│   └── main.tsx
├── docs/                    # 기획 문서
│   ├── prd.md              # PRD (8.2 KB)
│   ├── rules.md            # 게임 규칙 (9.2 KB)
│   ├── tatic.md            # 전술 시스템 (6 KB)
│   └── todo.md             # 개발 로드맵 (6.4 KB)
├── public/
├── dist/
└── package.json
```

**총 코드량**: ~2,851 lines TypeScript

---

## 4. 게임 로직 구현 현황

### 4.1 핵심 시스템 (✅ 완료)

#### 턴/액션 시스템
- 플레이어당 **2 액션/턴** (전술로 확장 가능)
- 액션 종류: 이동, 공격, 이탈, 노크, 전술 사용, 패스
- 같은 기물이 같은 액션을 턴 내 두 번 수행 불가
- 액션 로그 추적

#### 이동 시스템
- 이동력(발) 기반 타일 이동
- 경로 기록 및 추적
- 보급 시스템: 아군 타일 접촉 시 회복 단계 발동

#### 전투 시스템
| 공격 방향 | 설명 | 사용 스탯 |
|----------|------|----------|
| 해(Sun) | 우대각 공격 | Sun 스탯 |
| 달(Moon) | 좌대각 공격 | Moon 스탯 |
| 전선(Frontline) | 수평 공격 | 교착 유발 |

**데미지 계산**:
```
공격력 - 방어력 = 데미지
- 양수: 방어자 피해
- 음수: 공격자 피해
- 동률: 양측 1 피해
```

#### 교착(Stalemate) 시스템
- 전선 공격 시 양 유닛 교착 상태 진입
- **이탈(Disengage)**: 2 데미지 페널티로 교착 탈출 (액션 소모)

#### 병력 시스템
- 예비 병력: 초기 30유닛/플레이어
- 묘지 병력: 누적 손실 (전술로 복귀 가능)
- 1 유닛 = 10,000 병사
- OUT 상태: 병력 0 도달 시 발동

### 4.2 보드 시스템 (✅ 완료)

```
34 타일 삼각형 테셀레이션:
- 메인 그리드: 6행 × 5열 (30 타일)
- 특수 엣지 타일: 4개 (ID 30-33)
- 방향 시스템: Up/Down 삼각형
- 인접 연결: 변 접촉(전선), 꼭짓점 접촉(대각)
```

### 4.3 승리 조건 (✅ 완료)
- **노크 3회**: 상대 끝 구역 도달 3회 시 승리
- 대안: 적 기물 전멸, 모든 장군 제거, 상대 항복

### 4.4 미구현 시스템

| 시스템 | 상태 | 비고 |
|--------|------|------|
| 전술(Tactic) 시스템 | 🔄 부분 구현 | 타입만 정의됨 |
| AI 상대 | ❌ 미구현 | |
| 멀티플레이어 | ❌ 미구현 | |
| 애니메이션 | ❌ 미구현 | |
| 사운드 | ❌ 미구현 | |

---

## 5. 기획 문서 요약

### 5.1 prd.md (PRD)
- **컨셉**: 오호대장군 (Five Tiger Generals) 테마
- **플랫폼**: 모바일 우선, PC 지원
- **장르**: 1:1 턴제 전략 보드게임
- **예상 플레이타임**: 20-40분

### 5.2 rules.md (게임 규칙)
- 보드 구성 및 구조
- 기물/장군 시스템 (4 스탯: 해, 달, 발, 성)
- 전투 시스템 상세
- 턴 구조 (2-3 액션)
- 병력 관리 및 보급 메커니즘

### 5.3 tatic.md (전술 시스템)
총 20개 전술:
- **현장용(Field)**: 전투 중 사용
- **사무용(Office)**: 비전투 단계 사용

전술 유형:
- Instant: 즉시 효과
- Equipped: 장착형
- Installable: 설치형

예시: 일격, 보병장력, 화계, 토벽 등

### 5.4 todo.md (개발 로드맵)
```
Phase 1 (1-4주): UI/UX - ⏸️ 중단
Phase 2 (5-8주): 핵심 게임 로직 - 🔄 진행 중
Phase 3 (9-12주): UI/UX 통합
Phase 4 (13-14주): 서버 & 멀티플레이어
Phase 5 (15-16주): 베타 런칭
```

---

## 6. 아키텍처 특징

### 강점
- **깔끔한 관심사 분리**: 게임 로직 vs 렌더링 vs UI
- **타입 안전성**: 포괄적인 TypeScript 인터페이스
- **불변 상태 패턴**: Zustand + 함수형 업데이트
- **모듈화된 타일 시스템**: 적절한 추상화

### 사용된 패턴
- State Machine 패턴 (턴 상태, 이동 상태)
- Factory 패턴 (보드 그래프 빌딩)
- Observer 패턴 (Phaser 이벤트)
- Container 패턴 (Phaser Container)

---

## 7. 핵심 파일 목록

| 파일 | 라인 수 | 역할 |
|------|---------|------|
| `engine.ts` | 410 | 핵심 게임 로직, 액션, 전투, 턴 관리 |
| `types.ts` | 180 | 게임 상태 타입 정의 |
| `BoardGraph.ts` | 375 | 삼각형 그리드, 인접성, 특수 타일 |
| `Board.ts` | 290 | 삼각형 타일 Phaser 렌더링 |
| `gameStore.ts` | 180 | Zustand 상태 관리 |
| `MainScene.ts` | 130+ | Phaser 씬 설정 |
| `GameUI.tsx` | 150+ | React UI 패널 |

---

## 8. 재사용 가치 평가

### 높은 재사용 가치 (✅)
- `engine.ts` - 핵심 게임 로직 전체
- `types.ts` - 타입 정의 시스템
- `BoardGraph.ts` - 삼각형 그리드 시스템
- `docs/*.md` - 기획 문서 전체

### 중간 재사용 가치 (🔄)
- `Board.ts` - Phaser 렌더링 (리팩토링 필요)
- `gameStore.ts` - 상태 관리 (구조 개선 필요)

### 낮은 재사용 가치 (❌)
- UI 컴포넌트 - 플레이스홀더 수준
- 빌드 설정 - 단순 GitHub Pages용

---

## 9. 결론

**이 프로젝트의 가치**:
1. 게임 규칙과 메커니즘이 잘 정리된 기획 문서
2. 검증된 핵심 게임 로직 (engine.ts)
3. 복잡한 삼각형 보드 시스템 구현 (BoardGraph.ts)

**한계점**:
1. 백엔드/멀티플레이어 인프라 없음
2. UI가 최소 수준
3. 테스트 코드 부재

**권장 활용 방안**:
- 기획 문서를 새 프로젝트의 기반으로 사용
- engine.ts와 BoardGraph.ts 로직을 정제하여 이식
- 타입 시스템을 확장하여 재사용
