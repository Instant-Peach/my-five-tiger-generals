# 오호대장군 - UI Page Flow

> 작성일: 2026-02-02
> 버전: 1.1.0 (SSOT 정합성 반영)
> 레퍼런스: 스타크래프트 배틀넷, 보드게임 아레나

---

## 1. 전체 플로우 개요

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           UI PAGE FLOW                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐      │
│   │   홈     │────▶│   로비   │────▶│  대기실  │────▶│   게임   │      │
│   │  화면    │     │          │     │          │     │   화면   │      │
│   └──────────┘     └──────────┘     └──────────┘     └────┬─────┘      │
│        │                │                │                 │            │
│        │                │                │                 ▼            │
│        │                │                │           ┌──────────┐      │
│        │                │                │           │   결과   │      │
│        │                │                │           │   화면   │      │
│        │                │                │           └────┬─────┘      │
│        │                │                │                │            │
│        │                ◀────────────────┴────────────────┘            │
│        │                                                                │
│   ┌──────────┐                                                          │
│   │  방 설정 │◀── 방 생성 시                                            │
│   └──────────┘                                                          │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 2. 페이지별 상세

### 2.1 홈 화면 (Home)

> **목적**: 첫 진입점, 로그인/게스트 선택

```
┌─────────────────────────────────────────────────────────┐
│                                                          │
│                    ⚔️ 오호대장군 ⚔️                      │
│                   五虎大將軍                             │
│                                                          │
│              "관우, 장비, 조운, 황충, 마초"               │
│               다섯 맹장과 함께 천하를 호령하라            │
│                                                          │
│           ┌─────────────────────────────┐               │
│           │      🔐 로그인하기          │               │
│           └─────────────────────────────┘               │
│                                                          │
│           ┌─────────────────────────────┐               │
│           │      👤 게스트로 입장        │               │
│           └─────────────────────────────┘               │
│                                                          │
│                     ─── 또는 ───                         │
│                                                          │
│              [N] 네이버  [G] 구글  [K] 카카오             │
│                                                          │
│  ┌────────┐                               ┌────────┐    │
│  │ 설정 ⚙️│                               │ 도움말 ?│    │
│  └────────┘                               └────────┘    │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**기능**:
| 요소 | 설명 | 동작 |
|------|------|------|
| 로그인하기 | 기존 계정 로그인 | 로그인 모달 표시 |
| 게스트로 입장 | 임시 닉네임 생성 | 로비로 이동 |
| 소셜 로그인 | 네이버/구글/카카오 | OAuth 인증 후 로비 |
| 설정 | 사운드, 언어 등 | 설정 모달 |
| 도움말 | 게임 규칙 안내 | 도움말 페이지 |

**Phase 구분**:
- Phase 1: 게스트 입장만 지원
- Phase 2+: 소셜 로그인 추가

---

### 2.2 로비 (Lobby)

> **목적**: 방 목록 확인, 빠른 입장, 방 생성

```
┌─────────────────────────────────────────────────────────┐
│  ⚔️ 오호대장군        [닉네임: 유비123]    [로그아웃]    │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌─────────────────────────────────────────────────┐    │
│  │  ⚡ 빠른 입장                                    │    │
│  │  (자동 매칭 - 약 30초 소요)                      │    │
│  └─────────────────────────────────────────────────┘    │
│                                                          │
│  ┌──────────────────────────────────────────────────┐   │
│  │  📋 방 목록                          [🔄 새로고침] │   │
│  ├──────────────────────────────────────────────────┤   │
│  │  방 이름          │ 호스트    │ 상태   │ 인원    │   │
│  ├───────────────────┼───────────┼────────┼─────────┤   │
│  │  관우만 쓸 수 있음 │ 조조999   │ 대기중 │ 1/2     │   │
│  │  초보만 오세요     │ 손권88    │ 대기중 │ 1/2     │   │
│  │  고수 환영         │ 여포77    │ 게임중 │ 2/2     │   │
│  │  연습 한판         │ 제갈량    │ 대기중 │ 1/2     │   │
│  │  ...               │           │        │         │   │
│  └──────────────────────────────────────────────────┘   │
│                                                          │
│  [◀ 이전]  1 / 5  [다음 ▶]                              │
│                                                          │
│  ┌─────────────────────────────────────────────────┐    │
│  │  ➕ 방 만들기                                    │    │
│  └─────────────────────────────────────────────────┘    │
│                                                          │
│  ───────────────────────────────────────────────────    │
│  👥 접속자: 127명  |  🎮 진행 중인 게임: 34개           │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**기능**:
| 요소 | 설명 | 동작 |
|------|------|------|
| 빠른 입장 | 자동 매칭 | 매칭 대기 → 대기실 |
| 방 목록 | 현재 열린 방들 | 클릭 시 입장 |
| 새로고침 | 목록 갱신 | 실시간 업데이트 |
| 방 만들기 | 새 방 생성 | 방 설정 화면으로 |
| 접속자/게임 | 현재 서버 상태 | 표시용 |

**방 상태**:
- 🟢 대기중: 입장 가능
- 🟡 게임중: 관전 가능 (Phase 3+)
- 🔴 비공개: 비밀번호 필요

---

### 2.3 방 설정 (Room Settings)

> **목적**: 방 생성 시 옵션 설정

```
┌─────────────────────────────────────────────────────────┐
│  ⚔️ 방 만들기                                [✕ 닫기]  │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   방 이름                                                │
│   ┌─────────────────────────────────────────────────┐   │
│   │ 초보 환영! 같이 연습해요                        │   │
│   └─────────────────────────────────────────────────┘   │
│                                                          │
│   ─────────────────────────────────────────────────     │
│                                                          │
│   🎮 게임 설정                                          │
│                                                          │
│   턴 시간 제한                                          │
│   ○ 없음  ● 60초  ○ 90초  ○ 120초                      │
│                                                          │
│   ─────────────────────────────────────────────────     │
│                                                          │
│   🔒 비공개 설정                                        │
│                                                          │
│   □ 비밀번호 설정                                       │
│   ┌─────────────────────────────────────────────────┐   │
│   │ (비밀번호 입력...)                              │   │
│   └─────────────────────────────────────────────────┘   │
│                                                          │
│   ─────────────────────────────────────────────────     │
│                                                          │
│   ┌─────────────────────────────────────────────────┐   │
│   │              🚀 방 만들기                       │   │
│   └─────────────────────────────────────────────────┘   │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**설정 옵션**:
| 옵션 | 설명 | 기본값 |
|------|------|--------|
| 방 이름 | 1-30자 | 자동 생성 |
| 턴 시간 제한 | 없음/60초/90초/120초 | 60초 |
| 비밀번호 | 선택사항 | 없음 |

**Phase 구분**:
- Phase 1: 로컬 플레이 (설정 불필요)
- Phase 2: 기본 방 설정
- Phase 3+: 고급 옵션 (전술 제한, 핸디캡 등)

---

### 2.4 대기실 (Waiting Room)

> **목적**: 플레이어 준비 확인, 채팅

```
┌─────────────────────────────────────────────────────────┐
│  ⚔️ 대기실: 초보 환영! 같이 연습해요       [🚪 나가기]  │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   ┌─────────────────────┐   ┌─────────────────────┐     │
│   │     PLAYER 1        │   │     PLAYER 2        │     │
│   │    (호스트 👑)       │   │                     │     │
│   ├─────────────────────┤   ├─────────────────────┤     │
│   │                     │   │                     │     │
│   │      🎖️ 유비123     │   │      🎖️ 조조999     │     │
│   │                     │   │                     │     │
│   │    ⭐⭐⭐ (1500)     │   │    ⭐⭐ (1200)       │     │
│   │                     │   │                     │     │
│   │   ✅ 준비 완료      │   │   ⏳ 준비 중...     │     │
│   │                     │   │                     │     │
│   └─────────────────────┘   └─────────────────────┘     │
│                                                          │
│   ─────────────────────────────────────────────────     │
│                                                          │
│   💬 채팅                                               │
│   ┌─────────────────────────────────────────────────┐   │
│   │ [유비123] 안녕하세요!                           │   │
│   │ [조조999] 안녕하세요~ 초보인데 괜찮을까요?       │   │
│   │ [유비123] 저도 초보에요 ㅎㅎ                    │   │
│   │ [시스템] 조조999님이 준비 완료했습니다.         │   │
│   └─────────────────────────────────────────────────┘   │
│   ┌─────────────────────────────────────┐ [전송]       │
│   │ 메시지 입력...                       │               │
│   └─────────────────────────────────────┘               │
│                                                          │
│   ─────────────────────────────────────────────────     │
│                                                          │
│   ┌─────────────────────────────────────────────────┐   │
│   │   ✅ 준비 완료 / ⏳ 준비 취소                   │   │
│   └─────────────────────────────────────────────────┘   │
│                                                          │
│   ※ 모든 플레이어가 준비 완료하면 게임이 시작됩니다     │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**기능**:
| 요소 | 설명 | 동작 |
|------|------|------|
| 플레이어 카드 | 닉네임, 레이팅 | 표시용 |
| 준비 상태 | 준비 완료/대기 | 토글 버튼 |
| 채팅 | 실시간 메시지 | 입력/전송 |
| 나가기 | 방 퇴장 | 로비로 이동 |

**게임 시작 조건**:
- 2명 입장 + 모두 준비 완료
- 호스트가 시작 버튼 클릭 (선택적)

---

### 2.5 게임 화면 (Game)

> **목적**: 실제 게임 플레이

```
┌─────────────────────────────────────────────────────────┐
│  P1: 유비123 (30) ♥♥♥        P2: 조조999 (30) ♥♥      │
│  노크: ⭐⭐☆                   노크: ⭐☆☆              │
├─────────────────────────────────────────────────────────┤
│                                                          │
│              ┌─────────────────────────┐                │
│              │                         │                │
│              │      ▲   ▼   ▲   ▼   ▲ │                │
│              │    ▼   ▲   ▼   ▲   ▼   ▲│                │
│              │      ▲   ▼   ▲   ▼   ▲ │                │
│              │    ▼   ▲   ▼   ▲   ▼   ▲│                │
│              │      ▲   ▼   ▲   ▼   ▲ │                │
│              │    ▼   ▲   ▼   ▲   ▼   ▲│                │
│              │                         │                │
│              │    [삼각형 게임 보드]    │                │
│              │                         │                │
│              └─────────────────────────┘                │
│                                                          │
├─────────────────────────────────────────────────────────┤
│                                                          │
│   ┌──────────────────┐  ┌──────────────────────────┐    │
│   │  선택된 장수      │  │  행동                    │    │
│   │  ─────────────   │  │  ─────────────────────   │    │
│   │  🔴 관우         │  │  [이동] [공격] [패스]    │    │
│   │  해: 5  달: 5    │  │                          │    │
│   │  발: 2  성: 5    │  │  남은 액션: ●●           │    │
│   │  병력: 28        │  │                          │    │
│   └──────────────────┘  └──────────────────────────┘    │
│                                                          │
│   ─────────────────────────────────────────────────     │
│   📢 조조999의 턴입니다 (남은 시간: 45초)               │
│                                                          │
│  [⚙️ 설정] [💬 채팅] [🏳️ 항복]                          │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**UI 영역**:
| 영역 | 내용 |
|------|------|
| 상단 바 | 양 플레이어 정보, 노크 카운트 |
| 중앙 | 게임 보드 (Phaser 캔버스) |
| 하단 패널 | 선택 장수 정보, 액션 버튼 |
| 최하단 | 턴 정보, 유틸리티 버튼 |

**액션 버튼 상태**:
- 활성: 해당 액션 수행 가능
- 비활성: 조건 불충족 (이동력 없음, 대상 없음 등)
- 하이라이트: 선택된 액션

---

### 2.6 결과 화면 (Result)

> **목적**: 게임 결과 표시, 다음 행동 선택

```
┌─────────────────────────────────────────────────────────┐
│                                                          │
│                      ⚔️ 게임 종료 ⚔️                     │
│                                                          │
│   ┌─────────────────────────────────────────────────┐   │
│   │                                                  │   │
│   │                  🏆 승 리 🏆                     │   │
│   │                                                  │   │
│   │                   유비123                        │   │
│   │                                                  │   │
│   │            노크 승리 (3회 달성)                  │   │
│   │                                                  │   │
│   └─────────────────────────────────────────────────┘   │
│                                                          │
│   ─────────────────────────────────────────────────     │
│                                                          │
│   📊 게임 통계                                          │
│   ┌─────────────────────────────────────────────────┐   │
│   │                  유비123    조조999              │   │
│   │  총 턴 수         12         11                  │   │
│   │  노크 횟수        3          1                   │   │
│   │  처치한 장수      2          1                   │   │
│   │  총 데미지        45         32                  │   │
│   └─────────────────────────────────────────────────┘   │
│                                                          │
│   ─────────────────────────────────────────────────     │
│                                                          │
│   ┌───────────────┐  ┌───────────────┐  ┌───────────┐   │
│   │  🔄 재대결    │  │  🏠 로비로    │  │ 📋 리플레이│   │
│   └───────────────┘  └───────────────┘  └───────────┘   │
│                                                          │
│   💬 [조조999] GG! 다음엔 이길게요~                      │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**승리 유형 표시**:
| 유형 | 메시지 |
|------|--------|
| 노크 승리 | "노크 승리 (3회 달성)" |
| 섬멸 승리 | "섬멸 승리 (전 장수 처치)" |
| 항복 승리 | "상대 항복" |
| 시간 초과 | "시간 초과 승리" |

**버튼 동작**:
| 버튼 | 설명 | 동작 |
|------|------|------|
| 재대결 | 같은 상대와 재시작 | 대기실로 (상대 동의 필요) |
| 로비로 | 로비 복귀 | 로비 화면 |
| 리플레이 | 게임 다시 보기 | 리플레이 뷰어 (Phase 3+) |

---

## 3. 페이지 전환 플로우

### 3.1 정상 플로우

```
홈 화면
    │
    ├──[로그인/게스트]──▶ 로비
    │                      │
    │                      ├──[빠른 입장]──▶ 매칭 대기 ──▶ 대기실
    │                      │
    │                      ├──[방 입장]──▶ 대기실
    │                      │
    │                      └──[방 만들기]──▶ 방 설정 ──▶ 대기실
    │                                                      │
    │                                            [모두 준비]│
    │                                                      ▼
    │                                                   게임 화면
    │                                                      │
    │                                            [게임 종료]│
    │                                                      ▼
    │                                                   결과 화면
    │                                                      │
    │   ◀──────────────────[로비로]────────────────────────┤
    │                                                      │
    │                      ◀──────────[재대결]─────────────┘
    │                                   (대기실로)
    │
    └──[로그아웃]──▶ 홈 화면
```

### 3.2 예외 플로우

| 상황 | 현재 화면 | 동작 |
|------|----------|------|
| 연결 끊김 | 게임 화면 | 재연결 시도 → 실패 시 로비 |
| 상대 탈주 | 게임 화면 | 승리 처리 → 결과 화면 |
| 호스트 퇴장 | 대기실 | 방 해체 → 로비 |
| 세션 만료 | 모든 화면 | 홈 화면 |

---

## 4. 반응형 레이아웃

### 4.1 브레이크포인트

| 크기 | 너비 | 레이아웃 |
|------|------|----------|
| Mobile | < 640px | 세로 스택, 터치 최적화 |
| Tablet | 640-1024px | 2단 레이아웃 |
| Desktop | > 1024px | 전체 레이아웃 |

### 4.2 모바일 고려사항

- 터치 영역: 최소 44×44px
- 게임 보드: 화면 80% 차지
- 하단 패널: 슬라이드업 방식
- 채팅: 오버레이 팝업

---

## 5. Phase별 구현 범위 (수정됨)

### Phase 1: Local Demo (간소화)

> **핵심 원칙**: "플레이 가능한 빌드가 먼저!" - 홈 화면, 로비 불필요

**포함**:
- [x] 게임 화면 (전체 기능)
- [x] 결과 화면 (기본 통계 + 재시작)
- [x] 시작 모달 (게임 시작 버튼만)

**제외 (Phase 2로 이동)**:
- ~~홈 화면~~ → Phase 2
- ~~로비~~ → Phase 2
- ~~대기실~~ → Phase 2
- ~~채팅~~ → Phase 2

**Phase 1 플로우**:
```
[시작 모달] → [게임 화면] → [결과 화면] → [재시작/시작 모달]
```

### Phase 2: Online Demo
- [ ] 홈 화면 (게스트 + 기본 로그인)
- [ ] 로비 (방 목록, 빠른 입장)
- [ ] 방 설정 (기본 옵션)
- [ ] 대기실 (준비 상태, 채팅)
- [ ] 게임 화면 (온라인 동기화)
- [ ] 결과 화면 (통계, 재대결)

### Phase 3: Full Game
- [ ] 소셜 로그인 (네이버, 구글, 카카오)
- [ ] 랭킹/레이팅 표시
- [ ] 관전 모드
- [ ] 리플레이 시스템
- [ ] 고급 방 설정

---

## 6. 컴포넌트 구조 (Phase별)

### Phase 1 구조 (간소화)

```
src/
├── App.tsx                    # 메인 앱 (라우팅 없음)
├── components/
│   ├── game/
│   │   ├── Game.tsx           # Phaser 게임 래퍼
│   │   ├── GameBoard.tsx      # 보드 렌더링
│   │   ├── PieceInfo.tsx      # 선택 기물 정보
│   │   ├── ActionPanel.tsx    # 액션 버튼
│   │   └── TurnIndicator.tsx  # 턴/액션 표시
│   ├── result/
│   │   ├── ResultModal.tsx    # 결과 모달
│   │   └── GameStats.tsx      # 기본 통계
│   └── start/
│       └── StartModal.tsx     # 게임 시작 모달
├── game-core/                 # 게임 로직 (순수 TS)
│   ├── engine.ts
│   ├── board-graph.ts
│   └── types.ts
└── hooks/
    └── useGame.ts             # 게임 상태 훅 (Zustand)
```

### Phase 2 추가 구조

```
src/
├── pages/                     # Phase 2에서 추가
│   ├── HomePage.tsx
│   ├── LobbyPage.tsx
│   ├── WaitingRoomPage.tsx
│   ├── GamePage.tsx
│   └── ResultPage.tsx
├── components/
│   ├── home/
│   │   ├── LoginButton.tsx
│   │   └── GuestButton.tsx
│   ├── lobby/
│   │   ├── RoomList.tsx
│   │   └── QuickMatchButton.tsx
│   └── waiting-room/
│       ├── PlayerCard.tsx
│       └── ChatBox.tsx
└── hooks/
    ├── useAuth.ts             # Phase 2에서 추가
    ├── useLobby.ts
    ├── useRoom.ts
    └── useGame.ts
```

---

## 7. Phase 1 간소화 플로우 (상세)

### 7.1 시작 모달

```
┌─────────────────────────────────────────────────────────┐
│                                                          │
│                    ⚔️ 오호대장군 ⚔️                      │
│                   五虎大將軍                             │
│                                                          │
│              "관우, 장비, 조운, 황충, 마초"               │
│               다섯 맹장과 함께 천하를 호령하라            │
│                                                          │
│           ┌─────────────────────────────┐               │
│           │      🎮 게임 시작           │               │
│           └─────────────────────────────┘               │
│                                                          │
│                  2인 로컬 플레이                         │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### 7.2 결과 모달 (Phase 1)

```
┌─────────────────────────────────────────────────────────┐
│                                                          │
│                      ⚔️ 게임 종료 ⚔️                     │
│                                                          │
│                  🏆 Player 1 승리 🏆                     │
│                                                          │
│                   노크 승리 (3회 달성)                   │
│                                                          │
│   ─────────────────────────────────────────────────     │
│                                                          │
│   📊 게임 통계                                          │
│   ┌─────────────────────────────────────────────────┐   │
│   │               Player 1    Player 2              │   │
│   │  총 턴 수         12         11                 │   │
│   │  노크 횟수        3          1                  │   │
│   │  처치한 장수      2          1                  │   │
│   └─────────────────────────────────────────────────┘   │
│                                                          │
│   ┌───────────────────────────────────────────────┐     │
│   │              🔄 다시 시작                      │     │
│   └───────────────────────────────────────────────┘     │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

*이 문서는 스타크래프트 배틀넷 및 보드게임 아레나의 UX 패턴을 참조하여 작성되었습니다.*
*리뷰 피드백 반영: 2026-02-02*
