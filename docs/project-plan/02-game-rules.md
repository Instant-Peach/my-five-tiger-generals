# 오호대장군 - 게임 규칙

> 작성일: 2026-02-02
> 버전: 1.1.0 (SSOT 정합성 반영)

---

## 1. 게임 개요

**오호대장군**은 삼국지 테마의 1:1 턴제 전략 보드게임입니다.

- **플레이어**: 2명
- **플레이 시간**: 20-40분
- **목표**: 상대 진영 끝까지 도달하여 별도의 행동으로 **노크 3회** 달성

---

## 2. 보드 구성

### 2.1 삼각형 테셀레이션

```
Row 0:     ▲   ▼   ▲   ▼   ▲
Row 1:   ▼   ▲   ▼   ▲   ▼   ▲
Row 2:     ▲   ▼   ▲   ▼   ▲
Row 3:   ▼   ▲   ▼   ▲   ▼   ▲
Row 4:     ▲   ▼   ▲   ▼   ▲
Row 5:   ▼   ▲   ▼   ▲   ▼   ▲

[Player A 진영: Row 0-1]
[중립 지역: Row 2-3]
[Player B 진영: Row 4-5]
```

### 2.2 타일 구성

| 타일 유형 | 개수 | 설명 |
|----------|------|------|
| **메인 타일** | 30개 | 6행 × 5열 기본 그리드 |
| **엣지 타일** | 4개 | 보드 가장자리 연결용 (ID 30-33) |
| **총합** | 34개 | |

### 2.3 타일 방향

- **▲ (Up Triangle)**: 꼭짓점이 위를 향함
- **▼ (Down Triangle)**: 꼭짓점이 아래를 향함

방향에 따라 인접 타일과 공격 가능 방향이 달라집니다.

---

## 3. 기물 (Pieces)

### 3.1 기물 구성

각 플레이어는 **5개의 기물**을 보유합니다.

> **오호대장군 (五虎大將軍)**: 유비 휘하 다섯 명의 명장
> 실제 게임에서는 삼국지 장수들의 이름과 특성을 반영합니다.

| 기물 | 장수 (예시) | 설명 |
|------|------------|------|
| **기물 1** | 관우 (關羽) | 고스탯 탱커형 |
| **기물 2** | 장비 (張飛) | 고공격/저방어형 |
| **기물 3** | 조운 (趙雲) | 고기동/균형형 |
| **기물 4** | 황충 (黃忠) | 공격 특화형 |
| **기물 5** | 마초 (馬超) | 고공격/초저방어형 |

> **참고**: MVP에서는 오호대장군 5명을 예시로 사용합니다. 향후 다른 삼국지 장수들이 추가될 예정이며, 모든 기물은 **특수 능력 없이 스탯만 다릅니다**.

### 3.2 기물 스탯

각 기물은 4가지 스탯을 가집니다:

| 스탯 | 아이콘 | 설명 |
|------|--------|------|
| **해 (Sun)** | ☀️ | 해 라인 방향 공격력 (1~3) |
| **달 (Moon)** | 🌙 | 달 라인 방향 공격력 (1~3) |
| **발 (Move)** | 👣 | 이동 행동 시 발 수만큼 연속 이동 가능 (1~5) |
| **별 (Star)** | ⭐ | 통솔력/병력 상한 - 별 1개당 병력 2단위(2만)까지 통솔 가능 (1~5) |

> **참고**: 별(Star) 스탯은 **방어력이 아닙니다**. 별은 해당 장수가 통솔할 수 있는 **병력의 상한**을 결정합니다.

### 3.3 병력 (Troops)

- 각 기물은 **병력 수치**를 가짐
- 병력 상한: **별(Star) × 2단위** (별 3개 = 최대 6단위)
- 초기 배치 병력: 출전 시 **최소 1단위**, **최대 (별×2단위)** 범위 내에서 선택
- 병력이 **0**이 되면 **전멸** 상태
- 1 병력 = 10,000 병사 (1단위 = 1만)

#### 병력과 통솔 상한

- 보급으로 **일시 초과** 가능: 보급을 받은 턴에는 상한을 넘어 병력을 가질 수 있음
- 다음 턴 시작 시 보급 장수가 자동 복귀하면서 **초과분은 복귀** 처리, 현장에는 **상한까지만** 남음

---

## 4. 턴 구조

### 4.1 턴 순서

```
1. Player A 턴 시작
   └── 기본 행동력(현재 3) 소모
2. Player B 턴 시작
   └── 기본 행동력(현재 3) 소모
3. 반복...
```

> **설계 참고**: 턴당 행동력은 현재 **3개**가 기본이며, 밸런싱/커스터마이징을 위해 상수로 정의하여 변경 가능하게 설계합니다. (`ACTIONS_PER_TURN = 3`)

### 4.2 액션 종류

각 플레이어는 턴당 **기본 행동력(현재 3)** 만큼 행동을 수행합니다.

| 액션 | 설명 | 제한 |
|------|------|------|
| **이동 (Move)** | 기물을 인접 타일로 이동 | 발(이동력) 수만큼 연속 이동 |
| **공격 (Attack)** | 인접 적 기물 공격 | 해/달/전선 방향별 |
| **모의 (Tactics)** | 책략 사용 (Phase 3) | 장착된 책략 중 선택 |

> **참고**: `이탈(Disengage)`와 `패스(Pass)`는 별도 액션이 아닙니다.
> - **이탈**: 교착 상태에서 [이동]을 선택하면 **자동으로 이탈 처리**되어 이탈자만 피해 2를 받고 이동합니다.
> - **패스**: 별도 패스 액션은 없으며, 행동하지 않으려면 단순히 액션을 사용하지 않으면 됩니다.

### 4.3 액션 제한

- **같은 기물**이 **같은 액션**을 턴 내 **2번 이상 수행 불가**
  - 예: 장군이 이동 후, 같은 턴에 다시 이동 불가
  - 예: 장군이 이동 후, 공격은 가능
- ~~"공격/모의 후 추가 이동 불가" 규칙은 **제거됨**~~ (이전 SSOT에 있었으나 현재 규칙에서 폐기)

---

## 5. 이동 시스템

### 5.1 이동 규칙

1. [이동]을 선택하면 **발(이동력) 수만큼**의 이동 포인트가 부여됨
2. 칸을 이동할 때마다 이동 포인트가 **1씩 차감**
3. 이동을 **직접 종료**하거나 이동 포인트가 **0이 되면** 해당 [이동] 행동 종료
4. **변을 공유하는 인접 칸**으로만 이동 가능 (점프 불가)
5. **적이 점유한 칸**으로 이동 불가 (공격만 가능)
6. **아군이 점유한 칸**으로 이동 시 **보급**으로 처리

### 5.2 인접 타일 정의

삼각형 타일의 인접 관계 (변을 공유하는 칸만):

```
▲ (Up Triangle) 인접:
- 좌측 변 (Left Edge)
- 우측 변 (Right Edge)
- 하단 변 (Bottom Edge)

▼ (Down Triangle) 인접:
- 좌측 변 (Left Edge)
- 우측 변 (Right Edge)
- 상단 변 (Top Edge)
```

> **참고**: 타일 연결은 변을 공유하는 인접만 존재하며, 꼭짓점만 공유하는 타일은 인접이 아닙니다 (단, 특정 책략 "돌파" 사용 시 꼭짓점 공유 칸으로도 이동 가능).

### 5.3 보급 시스템 (Supply)

**[이동]으로 아군과 포개면 보급을 수행합니다.**

1. **보급 발동**: 아군 기물이 있는 칸으로 이동하면 보급 수행
2. **복귀 대기**: 보급을 위해 **복귀 대기 상태**가 됨
3. **자동 복귀**: **1턴 후 자동 복귀** (복귀 턴에는 출전 불가)
4. **OUT 카운트 미적용**: 보급 복귀에는 **OUT 카운트가 적용되지 않음**
   - 단, 보급 직후 상대 차례에서 해당 부대가 궤멸하면 OUT 카운트 적용

> **Phase 구분**: Phase 1/2에서는 보급 시스템을 간략화하고, Phase 3에서 전체 보급 시스템을 구현합니다.

---

## 6. 전투 시스템

### 6.1 공격 방향

삼각형 보드의 핵심 메커니즘: **방향에 따른 공격 차이**

```
        ☀️ 해 (Sun) - 해 라인 방향 공격
         ↗
    ●──────→ ⚔️ 전선 (Frontline) - 가로 라인 대치
         ↘
        🌙 달 (Moon) - 달 라인 방향 공격
```

| 공격 유형 | 방향 | 사용 스탯 | 효과 |
|----------|------|----------|------|
| **해 (Sun)** | 해 라인 (대각선 1) | 공격자 Sun vs 수비자 Sun | 공격력 비교 |
| **달 (Moon)** | 달 라인 (대각선 2) | 공격자 Moon vs 수비자 Moon | 공격력 비교 |
| **전선 (Frontline)** | 전선 라인 (가로줄) | - | 피해 1 + 교착 |

### 6.2 해/달 라인 전투 - 데미지 계산

**핵심**: 해/달 라인 전투에서는 **전투 방향에 맞는 공격력으로만 비교**합니다. **방어력 개념은 존재하지 않습니다.**

```
# 해/달 라인 전투 계산식
피해 = 공격자 공격력(방향별) - 수비자 공격력(같은 방향 기준)

if (피해 > 0):
    수비자 병력 -= 피해
elif (피해 < 0):
    공격자 병력 -= |피해|
else (피해 == 0):
    양측 병력 -= 1

# 예시: 해 라인 공격
# 공격자 해(Sun) = 3, 수비자 해(Sun) = 2
# 피해 = 3 - 2 = 1 → 수비자 병력 -1

# 병력은 0 미만이 될 수 없음
병력 = max(0, 병력)

# 병력이 0이 되면 전멸 처리
if (병력 <= 0):
    기물.status = 'annihilated'  # 전멸
```

> **중요**: 별(Star) 스탯은 **방어력이 아니라 통솔력(병력 상한)**입니다. 전투 계산에 별 스탯은 사용되지 않습니다.

### 6.3 전선(가로 라인) 전투와 교착

**전선 공격** 시 발생하는 특수 상태:

1. 전선 방향으로 공격 시 상대에게 **피해 1**을 가함
2. 공격자/피격자 **양측에 교착 상태**가 발생
3. **교착 상태**에서는 일반 이동이 금지됨
4. 교착 상태에서 선택지는 **[공격] 또는 [이동(=이탈)]** 뿐

**교착의 전략적 의미**:
- ⭐ 별이 많은 장수 = 상대를 붙잡아두기 유리 (병력 상한 높음)
- 👣 발이 많은 장수 = 돌파하여 진영으로 진출 유리

### 6.4 이탈 (Disengage)

교착 상태에서 [이동]을 선택하면 **이탈 처리**로 간주됩니다:

- **자동 발동**: 교착 상태에서 [이동] 선택 시 자동으로 이탈
- **페널티**: **이탈자만 피해 2**를 받고 이동을 시작
- **결과**: 공격자와 피격자 모두 교착 상태 해제
- **병력 부족 시**: 병력이 **2 이하**라면 이동 즉시 **전멸 처리**되며 행동 1개를 소모한 것으로 처리

> **참고**: 이탈은 별도의 액션이 아니라, 교착 상태에서 [이동]을 선택할 때 자동으로 적용되는 효과입니다.

---

## 7. 전멸·와해·패전 처리

### 7.1 전멸 (Annihilation)

**장수 하나**의 병력이 0이 되는 상태를 "전멸"로 정의합니다.

- **첫 번째 전멸**: 해당 장수는 패전 처리 후 **복귀**
- **두 번째 전멸**: 해당 장수는 인게임에서 **완전 퇴장(전사)**

### 7.2 패전 처리

**스탯 감소 패널티는 존재하지 않습니다.**

- 최초 전멸(병력 0) → **패전 처리 후 복귀**, 스탯 감소 없음
- 두 번째 전멸 → **해당 장수 완전 퇴장**

> **참고**: 초기 기획에는 "최초 전멸 시 스탯 1점 감소"가 있었으나, 의도적으로 제거된 상태가 최종안입니다.

### 7.3 와해 (Collapse)

아군 측의 **모든 장수가 완전 퇴장**된 상태를 "와해"로 정의합니다.

- 전멸과 와해는 **서로 다른 개념**
- 와해 시 즉시 패배

---

## 8. 승리 조건

### 8.1 노크 (Knock)

```
[Player A 진영]  ←── Player B가 여기 도달 + 행동 1개 소비 = 노크!
     ...
[Player B 진영]  ←── Player A가 여기 도달 + 행동 1개 소비 = 노크!
```

**노크의 정의**:
- **끝 칸(상대의 첫 칸)에 도달한 것만으로는 노크가 아닙니다**
- 끝 칸에 도달한 이후, **별도의 행동 1개를 소비**해서 "노크"를 수행해야 합니다
- 행동력을 모두 사용해 끝 칸에 도달했다면, 그 턴에는 **노크 불가**

**노크 후 복귀 규칙**:
- 노크 후 해당 기물은 **시작 위치로 복귀**
- 복귀 위치에 **아군 기물**이 있으면: 가장 가까운 빈 아군 진영 타일로 복귀
- 복귀 위치에 **적 기물**이 있으면: 해당 적 기물을 밀어내고 복귀
- 복귀 가능한 빈 타일이 없으면: 해당 기물은 전멸 처리 (극히 드문 상황)

### 8.2 승리 조건 목록

| 조건 | 설명 | 우선순위 |
|------|------|---------|
| **노크 승리** | 노크 **3회** 달성 | 1 |
| **전멸 승리** | 상대 병력 전부 소멸 | 2 |
| **와해 승리** | 상대 장수가 **모두 완전 퇴장** (일시 OUT 제외) | 3 |
| **항복 승리** | 상대 항복 선언 | - |

> **참고**: "섬멸"이라는 용어 대신 "전멸"(개별 장수)과 "와해"(전체 팀)를 구분하여 사용합니다.

---

## 9. 책략 시스템 ([모의] 액션)

### 9.1 개요

[모의] 액션을 통해 **책략 1가지를 사용**할 수 있습니다.

- 책략은 **현장용**과 **사무용**으로 구분
- 덱 빌딩 단계에서 장수별로 **책략 3개**를 장착
- 각 책략은 해당 장수 기준 **일회용** (총 3회 사용 가능)

### 9.2 Phase별 구현

**Phase 1/2 (MVP)**:
- 실제 책략 효과는 구현하지 않음
- **[모의]의 예비 슬롯만 UI와 규칙에 표시**
- 플레이어가 향후 책략 시스템이 들어올 자리를 이해할 수 있게 하는 수준

**Phase 3**:
- `docs/tatic.md`에 정의된 **모든 책략 내용을 실제 구현**
- [모의] 액션 → 장수당 장착한 3개 책략 표시 → 1개 선택 사용 → 행동력 1 소모
- 현장용/사무용 조건에 따른 사용 가능 여부 판정

### 9.3 UI 규칙

- 이미 사용한 책략: **어둡게(소진 표시)**
- 현재 상태에서 사용 불가(현장/사무 조건 불일치): **비활성(흐리게)** 처리
- [모의] 버튼을 눌러도 **즉시 행동력 소모 없음**, 책략을 **선택·시전하는 순간** 행동력 1 소모

---

## 10. 게임 플로우

### 10.1 게임 시작

```
1. 양 플레이어 기물 배치 (자동 또는 선택)
2. 선공 결정 (랜덤 또는 규칙)
3. 게임 시작
```

### 10.2 턴 진행

```
[턴 시작]
    ↓
[액션 1 수행] ← 이동/공격/모의
    ↓
[액션 2 수행] ← 이동/공격/모의
    ↓
[턴 종료 체크]
    ├── 노크 발생? → 노크 카운트 증가
    ├── 승리 조건? → 게임 종료
    └── 계속 → 상대 턴으로
```

### 10.3 게임 종료

```
[승리 조건 달성]
    ↓
[승자 결정]
    ↓
[결과 화면]
    ├── 승자/패자 표시
    ├── 게임 통계 (턴 수, 노크 수, 등)
    └── 재시작/메뉴 선택
```

---

## 11. 엣지 케이스 및 예외 규칙

### 11.1 이동 관련

| 상황 | 규칙 |
|------|------|
| 이동력 0인 기물 | 이동 액션 선택 불가 (공격/모의만 가능) |
| 모든 인접 타일이 막힌 경우 | 이동 액션 선택 불가 |
| 교착 상태에서 이동 시도 | **이탈 처리됨** (피해 2 받고 이동) |

### 11.2 전투 관련

| 상황 | 규칙 |
|------|------|
| 공격력 = 수비자 공격력 (동률) | 양측 각각 1 데미지 |
| 병력 1인 기물의 동률 전투 | 양측 모두 전멸 처리 |
| 병력 2 이하인 기물이 이탈 시 | 전멸 처리 (이탈 피해 2 > 남은 병력) |

### 11.3 교착 관련

| 상황 | 규칙 |
|------|------|
| 3개 이상 기물 연쇄 교착 | 각 교착 쌍은 독립적으로 관리 |
| 교착 중 한쪽 전멸 | 생존 기물 자동 교착 해제 |
| 교착 중 제3자 공격 | 가능 (교착은 이동만 제한) |

### 11.4 노크 관련

| 상황 | 규칙 |
|------|------|
| 끝 칸 도달했으나 행동력 없음 | **그 턴에 노크 불가** (다음 턴에 노크 시도) |
| 복귀 위치에 아군 기물 | 가장 가까운 빈 아군 진영 타일로 복귀 |
| 복귀 위치에 적 기물 | 적 기물을 밀어내고 복귀 |
| 노크 후 기물이 전멸 | 노크 카운트는 유지됨 |

### 11.5 턴/게임 관련

| 상황 | 규칙 |
|------|------|
| 모든 장수 완전 퇴장 (한쪽) | 즉시 패배 (와해 패배) |
| 가능한 액션 없음 | 자동 턴 종료 |
| 양측 동시 마지막 기물 전멸 | 먼저 전멸된 쪽이 패배 (현재 턴 플레이어 우선) |

---

## 12. Demo MVP 범위

### 포함 (Phase 1)

- [x] 삼각형 보드 (34 타일)
- [x] 기물 5개 × 2 플레이어
- [x] 4 스탯 시스템 (해/달/발/별) - 별=통솔력
- [x] 이동 시스템
- [x] 전투 시스템 (해/달/전선) - 공격력 vs 공격력 비교
- [x] 교착/이탈 메커니즘
- [x] 노크 승리 조건 (행동 소비 필요)
- [x] 전멸/와해 승리 조건
- [x] 2인 로컬 플레이
- [x] [모의] 액션 UI 슬롯 (효과 없이 표시만)

### 제외 (Phase 2)

- [ ] 온라인 멀티플레이어
- [ ] 계정/랭킹 시스템
- [ ] 리플레이 기능
- [ ] 튜토리얼

### 제외 (Phase 3)

- [ ] 책략 시스템 (20개 책략) - 전체 구현
- [ ] 보급 시스템 상세
- [ ] 덱 빌딩 시스템

---

## 13. 부록: 스탯 밸런스 (초안)

### MVP 기물 스탯 (오호대장군 예시)

| 기물 | 해(Sun) | 달(Moon) | 발(Move) | 별(Star) | 병력 상한 | 초기 병력 예시 |
|------|---------|----------|----------|----------|----------|--------------|
| 관우 | 3 | 3 | 2 | 5 | 10 | 10 |
| 장비 | 3 | 2 | 3 | 3 | 6 | 6 |
| 조운 | 2 | 2 | 4 | 4 | 8 | 8 |
| 황충 | 3 | 3 | 2 | 3 | 6 | 6 |
| 마초 | 3 | 2 | 3 | 2 | 4 | 4 |

> **스탯 범위** (SSOT 기준):
> - 해/달 (공격력): 1~3
> - 발 (이동력): 1~5
> - 별 (통솔력): 1~5 (병력 상한 = 별 × 2)

> **참고**:
> - 모든 기물은 **특수 능력 없이 스탯만 다릅니다** (Phase 3 책략으로 차별화)
> - 밸런스는 플레이테스트를 통해 조정 예정
> - 향후 다른 삼국지 장수들이 추가될 예정
> - **별(Star)은 방어력이 아니라 통솔력(병력 상한)**입니다

---

## 14. 부록: 용어 정리

| 용어 | 정의 |
|------|------|
| **전멸** | 장수 하나의 병력이 0이 되는 상태 |
| **와해** | 아군 측의 모든 장수가 완전 퇴장된 상태 |
| **패전** | 전멸 후 복귀하는 것 (스탯 감소 없음) |
| **완전 퇴장(전사)** | 두 번째 전멸로 인게임에서 제거되는 것 |
| **노크** | 끝 칸 도달 후 행동 1개를 소비하여 수행하는 승리 조건 행동 |
| **교착** | 전선 공격 후 양측이 이동 불가가 되는 상태 |
| **이탈** | 교착 상태에서 [이동] 시 피해 2를 받고 탈출하는 것 |
| **보급** | 아군과 포개어 복귀 대기 후 자동 복귀하는 것 |
| **[모의]** | 책략을 사용하는 액션 (Phase 3 구현) |

---

*이 문서는 SSOT 레거시 문서(`rules.md`, `prd.md`, `tatic.md`, `temp-0905.md`)를 기반으로 정합성을 맞추어 재구성되었습니다.*
*버전 1.1.0 - SSOT 정합성 점검 후 수정 반영 (2026-02-02)*
