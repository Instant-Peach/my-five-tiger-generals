# Epic 8 회고: UI/UX

**프로젝트:** 오호대장군 (Five Tiger Generals)
**에픽:** Epic 8 - UI/UX
**회고 날짜:** 2026-02-14
**Agent Model:** Claude Opus 4.6 (retrospective & implementation)

---

## 에픽 요약

### 전달 지표

| 항목 | 값 |
|------|-----|
| 완료된 스토리 | 8/8 (100%) |
| 테스트 증가 | 561개 -> 797개 (+236개) |
| 신규 파일 | 48개 (스토리 아티팩트 8개 제외 시 48개) |
| 수정 파일 | 16개 |
| 차단 요소 | 0개 |
| correct-course 발생 | 0건 |
| 총 코드 변경 | +7,879줄 / -331줄 (pnpm-lock.yaml 제외) |
| game-core 변경 | 상수/타입 추가만 (순수 TypeScript) |

### 완료된 스토리

| # | 스토리 | 상태 | 주요 성과 |
|---|--------|------|----------|
| 8-1 | 메인 메뉴 (Main Menu) | done | StartScreen 컴포넌트, 삼국지 테마 색상, App.tsx screen 상태 리팩터링, 8개 테스트 |
| 8-2 | 게임 HUD (Game HUD) | done | PlayerInfoBar 통합, ActionCounter 도트 시각화, 턴/타이머 중앙 배치, syncHudState 헬퍼, 27개 테스트 |
| 8-3 | 장수 정보 패널 (General Info Panel) | done | GeneralStatsPanel CSS 분리, 반응형 미디어 쿼리, 접근성 강화, vitest alias 버그 수정, 29개 테스트 |
| 8-4 | 책략 선택 UI (Tactic Selection UI) | done | TacticButton, TacticPanel 슬라이드업, game-core tactics 모듈, Phase 1 플레이스홀더, 50개 테스트 |
| 8-5 | 설정 메뉴 (Settings Menu) | done | SettingsButton, SettingsModal, 토글 스위치, 포커스 트랩, settingsStore 연동 |
| 8-6 | 결과 화면 (Result Screen) | done | ResultScreen (VictoryBanner 대체), extractGameStats 순수 함수, 전적 통계 테이블, 다시 시작 기능 |
| 8-7 | 반응형 UI (Responsive UI) | done | BREAKPOINTS 상수, useResponsive 훅, LandscapeOverlay, safe-area, debounce 유틸, 3단계 브레이크포인트 |
| 8-8 | 접근성 및 터치 타겟 | done | ACCESSIBILITY 상수, 전역 focus-visible, prefers-reduced-motion 확산, ARIA 감사, alertdialog 패턴 |

---

## 성공 및 강점

### 1. 아키텍처 경계 100% 준수 (8번째 연속 에픽)

- **game-core**: tactics 모듈(types.ts, constants.ts), responsive/settings/result/accessibility 상수 전부 순수 TypeScript - Phaser 의존성 없음
- **apps/web**: React UI 컴포넌트 (StartScreen, PlayerInfoBar, ActionCounter, TacticButton, TacticPanel, SettingsButton, SettingsModal, ResultScreen, LandscapeOverlay)
- **game-renderer**: 이 에픽에서는 변경 없음 (GameScene.ts 1,708줄 유지)
- 3계층 분리 패턴이 8개 에픽 연속 100% 준수

### 2. 순수 UI/UX 에픽의 깔끔한 실행

```
game-core 변경 범위:
  constants/responsive.ts  (NEW - 브레이크포인트 상수)
  constants/settings.ts    (NEW - 설정 기본값)
  constants/result.ts      (NEW - 결과 화면 라벨)
  constants/accessibility.ts (NEW - 접근성 상수)
  tactics/types.ts         (NEW - 책략 타입)
  tactics/constants.ts     (NEW - 플레이스홀더 데이터)
  state/stats.ts           (NEW - extractGameStats 순수 함수)
  state/types.ts           (MODIFIED - GameStats 인터페이스 추가)
```

- Epic 8은 순수 UI/UX 에픽으로 game-core에는 상수/타입 정의와 순수 함수만 추가
- 게임 로직(game-renderer) 변경 0줄 - 기존 시스템 안정성 완벽 보존
- UI 레이어와 로직 레이어의 명확한 분리가 이 에픽에서 가장 빛남

### 3. 일관된 React 컴포넌트 패턴 확립

| 패턴 | 설명 | 적용 컴포넌트 |
|------|------|--------------|
| BEM CSS 네이밍 | `.component__element--modifier` | 모든 신규 CSS |
| createPortal 패턴 | document.body에 모달/패널 렌더링 | TacticPanel, SettingsModal, ResultScreen, LandscapeOverlay |
| 포커스 트랩 | 열림 시 포커스 이동, 닫힘 시 복귀 | TacticPanel, SettingsModal, SurrenderConfirmModal |
| ESC 키 닫기 | keydown 리스너 + onClose 콜백 | TacticPanel, SettingsModal |
| 접근성 속성 | role, aria-label, aria-modal | 모든 모달/패널 |
| 반응형 미디어 쿼리 | 430px / 1024px 브레이크포인트 | 모든 CSS 파일 |

- Epic 6에서 시작된 React UI 패턴이 8개 스토리에 걸쳐 성숙하고 일관되게 적용됨
- 새 컴포넌트 개발 시 기존 패턴을 참조하여 빠르고 일관된 구현 가능

### 4. 접근성 체계적 구축

```
전역 접근성 CSS (accessibility.css):
  - *:focus-visible { outline: 2px solid #ffd700; }
  - *:focus:not(:focus-visible) { outline: none; }

prefers-reduced-motion 적용:
  - LandscapeOverlay, TacticPanel, ResultScreen, SettingsModal (기존)
  - KnockButton, TurnTimer, AutoEndToast, SurrenderConfirmModal (8-8에서 추가)

ARIA 감사 결과:
  - GameHUD: role="region", aria-label="게임 HUD" 추가
  - SurrenderConfirmModal: role="dialog" -> role="alertdialog" 변경
  - StartScreen: aria-label="게임 시작" 추가
  - 모든 터치 타겟 44x44px 이상 확인 완료
```

- ACCESSIBILITY 상수를 game-core에 정의하여 향후 색맹 모드 등 확장 기반 마련
- 전역 focus-visible 전략으로 개별 컴포넌트별 추가 없이 일괄 적용 (CSS specificity 활용)

### 5. 테스트 커버리지 대폭 증가 (+236개)

- 전체 테스트 797개 통과 (Epic 6 종료 시 561개 대비 +42% 증가)
- 스토리별 테스트 분포:
  - start-screen.test.tsx: 8개
  - player-info-bar.test.tsx: 14개
  - action-counter.test.tsx: 13개
  - general-stats-panel.test.tsx: 29개
  - tactic-button.test.tsx: 11개
  - tactic-panel.test.tsx: 22개
  - settings-button.test.tsx: 10개+ (추정)
  - settings-modal.test.tsx: 15개+ (추정)
  - result-screen.test.tsx: 18개+ (추정)
  - landscape-overlay.test.tsx: 8개+ (추정)
  - use-responsive.test.ts: 10개
  - debounce.test.ts: 5개+ (추정)
  - accessibility-touch-target.test.tsx: 11개+ (추정)
  - game-core 상수/타입 테스트: tactics(17개), settings, responsive, result, stats, accessibility
- apps/web 테스트 인프라를 이번 에픽에서 처음 구축 (vitest + jsdom + @testing-library/react)

### 6. correct-course 0건 - 순수 UI 에픽의 명확한 범위

- Epic 6에서 1건 발생했던 correct-course가 이번에는 0건
- 원인 분석: UI/UX 에픽은 게임 규칙 해석이 필요한 로직 에픽과 달리 범위가 명확
- Phase 1 플레이스홀더 전략(책략 UI, 설정 확장 구조)이 범위 초과 방지에 효과적

### 7. z-index 체계 확립

| 레이어 | z-index | 컴포넌트 |
|--------|---------|----------|
| 게임 캔버스 | 1 | Phaser canvas |
| 게임 HUD | 100 | GameHUD |
| 항복 확인 모달 | 150 | SurrenderConfirmModal |
| 결과 화면 | 1000 | ResultScreen |
| 가로 모드 안내 | 2000 | LandscapeOverlay |
| 설정 모달 | 9997 | SettingsModal |
| 책략 패널 | 9998 | TacticPanel |
| 장수 정보 패널 | 9999 | GeneralStatsPanel |

- UI 오버레이 간 z-index 충돌 없이 체계적으로 관리됨
- 향후 새 모달/패널 추가 시 이 체계를 따르면 됨

---

## 도전 및 성장 영역

### 1. 루트 레벨 vitest 실행 시 환경 불일치

- **문제:** 프로젝트 루트에서 `npx vitest run` 실행 시 apps/web 테스트 203개가 실패 (ReferenceError: document is not defined)
- **원인:** 루트 vitest가 apps/web 테스트를 jsdom 환경 없이 실행
- **현재 상태:** 각 패키지 디렉토리에서 개별 실행 시 전체 통과 (apps/web: 221개, game-core: 576개)
- **영향:** CI/CD 파이프라인 구축 시 워크스페이스 수준 테스트 설정 필요
- **개선 방향:** 루트 vitest.workspace.ts 설정으로 멀티 프로젝트 테스트 통합

### 2. CSS 파일 증가 (10개+ -> 20개+)

- **문제:** Epic 8에서 CSS 파일 12개 신규 추가 (StartScreen, PlayerInfoBar, ActionCounter, GeneralStatsPanel, TacticButton, TacticPanel, SettingsButton, SettingsModal, ResultScreen, LandscapeOverlay, GameHUD, accessibility)
- **영향:** 전체 CSS 파일 20개+ 이상으로 증가, 스타일 일관성 관리 어려움 가중
- **완화:** BEM 네이밍 일관 적용, accessibility.css에 전역 CSS 변수 도입
- **개선 방향:** CSS Modules 또는 TailwindCSS 일괄 적용 검토 (3번째 에픽 연속 이연)

### 3. GameScene.ts 비대화 지속 (1,708줄)

- **문제:** GameScene.ts가 여전히 1,708줄 유지 (Epic 6 종료 시와 동일)
- **원인:** Epic 8은 순수 UI 에픽이라 GameScene 변경이 없었음
- **영향:** 이 에픽에서는 문제 없었으나, Epic 7(책략 시스템) 시작 시 반드시 분리 필요
- **개선 방향:** Epic 7 시작 전 KnockHandler, VictoryHandler, CombatHandler, TimerManager 분리

### 4. 브레이크포인트 비일관성 부분 해소

- **문제:** 기존 컴포넌트별 브레이크포인트가 430px, 480px, 640px, 768px 등 제각각
- **해결:** BREAKPOINTS 상수 정의 (MOBILE: 430, TABLET: 1023, DESKTOP: 1024), 신규 컴포넌트는 통합 기준 적용
- **남은 문제:** TurnTimer(640px), TurnIndicator(640px), AutoEndToast(480px), GeneralStatsPanel(768px) 등 기존 컴포넌트의 미디어 쿼리 미마이그레이션
- **영향:** 현재 기능적 문제 없으나, 태블릿 사이즈에서 미세한 불일관 가능성

### 5. sprint-status.yaml 동기화 불완전

- **문제:** Story 8-8이 sprint-status.yaml에서 `ready-for-dev`로 표시 (실제로는 done)
- **원인:** 커밋 시 sprint-status.yaml 업데이트가 누락됨
- **영향:** 자동 에픽 감지 로직에서 완료 상태를 정확히 파악하지 못함
- **개선 방향:** 스토리 완료 커밋 시 sprint-status.yaml 동시 업데이트 필수 (팀 합의 재확인)

### 6. E2E 테스트 여전히 미도입 (8번째 에픽 연속)

- **문제:** Playwright/Cypress E2E 테스트가 여전히 미도입
- **영향:** 메인 메뉴 -> 게임 시작 -> 플레이 -> 결과 화면 -> 메뉴 복귀 전체 플로우를 수동 테스트에 의존
- **위험:** UI/UX 에픽이므로 시각적 회귀 테스트의 필요성이 특히 높음
- **개선 방향:** Phase 1 완료 전 필수 도입 (8번째 에픽 연속 이연)

---

## 핵심 인사이트

1. **순수 UI 에픽의 깔끔한 실행** - game-core에 상수/타입만 추가하고 game-renderer를 전혀 건드리지 않는 순수 UI 에픽이 아키텍처 경계를 가장 깔끔하게 준수함. UI 레이어와 로직 레이어의 분리가 잘 되어 있다는 증거

2. **전역 CSS 전략의 효율성** - accessibility.css에 전역 `*:focus-visible` 스타일을 정의하는 것이 개별 컴포넌트 12개에 각각 추가하는 것보다 훨씬 효율적. CSS specificity를 활용한 전략이 유효함

3. **Phase 1 플레이스홀더 패턴의 가치** - TacticPanel(Phase 3 확장), SettingsModal(Phase 2 확장), ResultScreen(Phase 2 통계 확장) 모두 "껍데기 먼저" 전략으로 범위를 명확히 관리하면서도 확장 가능한 구조 확보

4. **React 컴포넌트 패턴 성숙** - 8개 스토리에 걸쳐 createPortal, 포커스 트랩, ESC 닫기, BEM CSS, 접근성 속성 등의 패턴이 반복 적용되며 개발 속도 향상. 패턴 학습 곡선이 Story 8-1~8-3에서 완료되고 8-4 이후 가속

5. **접근성의 체계화** - WCAG 접근성 기준을 사후 검증이 아닌 스토리 단위에서 AC로 명시하여 구현. 마지막 Story 8-8에서 전체 감사 및 보완으로 완성도 확보

---

## 기술 부채

| # | 항목 | 우선순위 | 출처 | 비고 |
|---|------|---------|------|------|
| 1 | Playwright E2E 테스트 미도입 | HIGH | Epic 1-8 | 8번째 에픽 연속 이연. Phase 1 완료 전 필수 도입 |
| 2 | GameScene.ts 분리 (1,708줄) | HIGH | Epic 5-6 | Epic 7(책략 시스템) 시작 전 분리 필수 |
| 3 | CSS 스타일 관리 체계화 | MEDIUM | Epic 5-8 | CSS 파일 20개+. CSS Modules 또는 TailwindCSS 적용 검토 |
| 4 | 브레이크포인트 마이그레이션 | MEDIUM | Epic 8 | 기존 컴포넌트(TurnTimer 640px 등) BREAKPOINTS 상수로 통합 |
| 5 | vitest 워크스페이스 통합 | MEDIUM | Epic 8 | 루트 레벨 테스트 실행 시 환경 불일치 해결 |
| 6 | sprint-status.yaml 동기화 | MEDIUM | Epic 5-8 | 8-8 상태 누락. 자동화 또는 프로세스 강화 필요 |
| 7 | Triangle 객체 풀링 | MEDIUM | Epic 3 | 아직 미해결 |
| 8 | TILE_META 조회 최적화 | MEDIUM | Epic 3 | 아직 미해결 |
| 9 | 사운드 에셋 placeholder 교체 | LOW | Epic 4 | 최종 에셋으로 교체 필요 |
| 10 | VictoryReason 'annihilation' 미사용 | LOW | Epic 6 | Phase 1에서 미사용, 향후 패전 복귀 구현 시 활용 예정 |

---

## Epic 6 회고 액션 아이템 추적

| # | 액션 아이템 | 담당 | 상태 | 비고 |
|---|------------|------|------|------|
| 1 | GameScene.ts 리팩토링 (모듈 분리) | Dev | pending | Epic 7 전 필수로 설정했으나, Epic 8이 순수 UI라 변경 없이 1,708줄 유지 |
| 2 | E2E 테스트 프레임워크 도입 | QA | pending | 여전히 미도입. Phase 1 완료 전 필수 |
| 3 | CSS 관리 방안 결정 및 적용 | Dev | partial | BEM 네이밍 일관 적용, 전역 CSS 변수 도입. 근본적 해결(CSS Modules/Tailwind)은 미완료 |
| 4 | sprint-status.yaml 일괄 정리 | SM | partial | Epic 8 스토리 7개 done 업데이트됨, 8-8은 ready-for-dev로 잔류 |
| 5 | 기획 모호성 사전 검증 프로세스 | SM/PO | not_applicable | Epic 8은 UI/UX로 기획 모호성 이슈 없었음 |

**Epic 6 팀 합의 준수 여부:**
- game-core Phaser 금지: 완전 준수 (8/8 스토리)
- 새 상수/타입 game-core 정의: 준수 (BREAKPOINTS, ACCESSIBILITY, tactics 타입 등)
- Dev Notes 기록: 준수 (8개 스토리 모두)
- 스토리 완료 커밋 시 sprint-status.yaml 동시 업데이트: 부분 준수 (8-8 누락)
- ARIA 속성 적용: 준수 (모든 UI 컴포넌트에 적용, 8-8에서 전체 감사)
- 단일 파일 1,000줄 초과 시 분리 검토: 해당 없음 (신규 파일 모두 1,000줄 미만)

---

## 액션 아이템

### 프로세스 개선

| # | 액션 아이템 | 담당 | 마감 | 성공 기준 |
|---|------------|------|------|----------|
| 1 | GameScene.ts 리팩토링 (모듈 분리) | Dev | Epic 9 시작 전 | KnockHandler, VictoryHandler, CombatHandler, TimerManager 분리. GameScene 900줄 이하 |
| 2 | E2E 테스트 프레임워크 도입 | QA | Phase 1 완료 전 | 메인 메뉴 -> 게임 시작 -> 결과 화면 E2E 테스트 1개 이상 |
| 3 | vitest 워크스페이스 설정 | Dev | 즉시 | 루트에서 `npx vitest run` 실행 시 모든 패키지 테스트 통과 |
| 4 | sprint-status.yaml 업데이트 | SM | 즉시 | Epic 8 done, 8-8 done, epic-8-retrospective done |
| 5 | CSS 관리 방안 장기 결정 | Dev | Epic 9 이전 | CSS Modules / TailwindCSS 중 선택, 마이그레이션 계획 수립 |

### 팀 합의 (계속 유지)

- [x] game-core에 Phaser 의존성 절대 금지
- [x] 새 상수/타입은 game-core에 먼저 정의
- [x] 스토리 완료 시 Dev Notes에 학습 내용 기록
- [x] 코드 리뷰에서 아키텍처 경계 확인
- [x] Public getter로 데이터 노출 (private 접근 금지)
- [x] 게임 루프 내 new 사용 금지 (객체 재사용)
- [x] 스토리 완료 커밋 시 sprint-status.yaml 동시 업데이트 필수
- [x] ARIA 속성 (role, aria-live, aria-label) 모든 UI 컴포넌트에 적용
- [x] 단일 파일 1,000줄 초과 시 분리 검토 필수
- [x] 기획 문서의 모호한 표현은 구현 전 PO와 확인
- [x] 도메인 용어는 게임 규칙 문서의 정의를 정확히 따름
- [x] 되돌릴 수 없는 사용자 행동에는 확인 모달 필수

### 새로운 팀 합의

- [x] createPortal 모달/패널은 z-index 체계를 따름 (100 ~ 9999 범위, 위 표 참조)
- [x] 반응형 브레이크포인트는 BREAKPOINTS 상수 사용 (MOBILE: 430, TABLET: 1023, DESKTOP: 1024)
- [x] 전역 접근성 스타일은 accessibility.css에서 관리 (focus-visible, reduced-motion 등)
- [x] 새 UI 컴포넌트는 BEM CSS 네이밍 + CSS 파일 분리 패턴 따름
- [x] 터치 타겟 44x44px은 ACCESSIBILITY.MIN_TOUCH_TARGET 상수 참조

---

## 기술적 성과 하이라이트

### 새로운 패턴/시스템

| 패턴 | 설명 | 파일 |
|------|------|------|
| 화면 전환 시스템 | Screen 타입('menu' \| 'game')으로 앱 상태 관리 | apps/web/src/App.tsx |
| PlayerInfoBar 통합 바 | 양 플레이어 정보 + 턴/타이머 + 행동 카운터 통합 | apps/web/src/components/game/PlayerInfoBar.tsx |
| syncHudState 헬퍼 | 이벤트 핸들러마다 gameState에서 HUD 데이터 추출 | apps/web/src/components/game/GameCanvas.tsx |
| createPortal 모달 패턴 | document.body에 렌더링, z-index 체계, 포커스 트랩 | TacticPanel, SettingsModal, ResultScreen, LandscapeOverlay |
| Phase 1 플레이스홀더 | PLACEHOLDER_TACTICS, 확장 가능한 슬롯 구조 | game-core/src/tactics/ |
| extractGameStats 순수 함수 | GameState에서 통계 추출 (턴 수, 노크, 남은 장수) | game-core/src/state/stats.ts |
| useResponsive 훅 | 뷰포트/방향/브레이크포인트 실시간 감지 + debounce | apps/web/src/hooks/useResponsive.ts |
| 전역 접근성 CSS | focus-visible, reduced-motion 전역 적용 | apps/web/src/styles/accessibility.css |
| ACCESSIBILITY 상수 | MIN_TOUCH_TARGET, FOCUS_OUTLINE, COLOR_BLIND_PATTERNS | game-core/src/constants/accessibility.ts |

### 이벤트 시스템 활용 (기존 이벤트, 신규 추가 없음)

Epic 8은 기존 이벤트 시스템을 활용하여 UI를 연결하는 패턴. 새 이벤트 추가 없이 기존 이벤트에 UI 핸들러만 추가:

| 이벤트 | UI 연동 | 스토리 |
|--------|---------|--------|
| turn:start | PlayerInfoBar 턴 강조, ActionCounter 리셋, TacticPanel 자동 닫기 | 8-2, 8-4 |
| general:selected | GeneralStatsPanel 표시, TacticButton 활성화 | 8-3, 8-4 |
| general:deselected | GeneralStatsPanel 닫기, TacticPanel 닫기 | 8-3, 8-4 |
| game:end | ResultScreen 표시 (VictoryBanner 대체) | 8-6 |
| timer:tick | TurnTimer 업데이트 (기존 유지) | 8-2 |

### 타입 확장

| 타입 | 설명 | 파일 |
|------|------|------|
| TacticId | 책략 식별자 | game-core/src/tactics/types.ts |
| TacticType | 'field' \| 'office' | game-core/src/tactics/types.ts |
| TacticSlotStatus | 'available' \| 'unavailable' \| 'exhausted' \| 'coming_soon' | game-core/src/tactics/types.ts |
| TacticInfo | 책략 정보 인터페이스 | game-core/src/tactics/types.ts |
| TacticSlot | 장수 장착 책략 슬롯 | game-core/src/tactics/types.ts |
| GameStats | 게임 통계 (턴 수, 노크, 남은 장수) | game-core/src/state/types.ts |

### 상수 활용

| 상수 | 값 | 파일 | 용도 |
|------|-----|------|------|
| BREAKPOINTS.MOBILE | 430 | game-core/src/constants/responsive.ts | 모바일 브레이크포인트 |
| BREAKPOINTS.DESKTOP | 1024 | game-core/src/constants/responsive.ts | 데스크톱 브레이크포인트 |
| RESPONSIVE.DEBOUNCE_MS | 150 | game-core/src/constants/responsive.ts | 리사이즈 디바운스 |
| ACCESSIBILITY.MIN_TOUCH_TARGET | 44 | game-core/src/constants/accessibility.ts | 최소 터치 타겟 크기 |
| ACCESSIBILITY.FOCUS_OUTLINE_COLOR | '#ffd700' | game-core/src/constants/accessibility.ts | 포커스 아웃라인 색상 |
| TACTIC_SLOTS_PER_GENERAL | 3 | game-core/src/tactics/constants.ts | 장수당 책략 슬롯 수 |
| SETTINGS_DEFAULTS | { soundEnabled: true } | game-core/src/constants/settings.ts | 설정 기본값 |

---

## 중요 발견 사항

**에픽 업데이트 필요:** 아니오

Epic 8에서 향후 계획을 변경해야 할 중대한 발견은 없었습니다.
- UI/UX 시스템이 GDD 명세대로 구현됨
- Phase 1 MVP의 전체 UI 플로우(메인 메뉴 -> 게임 -> 결과 -> 메뉴 복귀)가 완성됨
- 책략 UI 쉘이 Phase 3 확장에 대비하여 준비됨
- 접근성 기반이 확립되어 Phase 2에서 색맹 모드 등 확장 가능
- 반응형 기반(BREAKPOINTS, useResponsive)이 모든 화면 크기 지원

---

## 준비 상태 평가

| 항목 | 상태 | 비고 |
|------|------|------|
| 테스트 & 품질 | done | 797개 단위/통합 테스트 통과 (각 패키지 디렉토리에서) |
| 빌드 | done | 타입 에러 없음 |
| 타입 체크 | done | TypeScript 컴파일 성공 |
| 기술 건강 | done | 아키텍처 경계 100% 준수, UI/UX 8개 스토리 완성 |
| 미해결 차단요소 | done | 없음 |
| GameScene 비대화 | warning | 1,708줄 - Epic 9 전 분리 필수 |
| E2E 테스트 부재 | warning | Phase 1 완료 전 도입 필수 |
| CSS 관리 | warning | 20개+ CSS 파일, 체계적 관리 방안 필요 |
| vitest 워크스페이스 | warning | 루트 레벨 테스트 실행 시 환경 불일치 |

---

## 다음 단계

1. **sprint-status.yaml 업데이트** (Epic 8 -> done, 8-8 -> done, epic-8-retrospective -> done)
2. **vitest 워크스페이스 설정** (루트 레벨 테스트 통합)
3. **GameScene.ts 리팩토링** (HIGH 우선순위 기술 부채, 1,708줄 -> 900줄 목표)
4. **Epic 9: 멀티플레이어 시작** (`create-story` 워크플로우 사용)
   - 9-1: 온라인 대전 시작 (Online Match Start)
   - 9-2: 매치메이킹 (Matchmaking)
   - 9-3: 게임 상태 동기화 (Game State Sync)
   - ... (총 10개 스토리)
5. **E2E 테스트 도입** (HIGH 우선순위, 8번째 에픽 연속 이연)

---

## Epic 9 의존성 확인

| 의존성 | 상태 | 비고 |
|--------|------|------|
| 보드 시스템 | done | 삼각형 보드, 타일 좌표, 하이라이트 |
| 장수 시스템 | done | 배치, 선택, 스탯 관리 |
| 이동 시스템 | done | moveGeneral(), 경로 차단, 애니메이션 |
| 전투 시스템 | done | 공격, 데미지, OUT 처리 |
| 턴 관리 시스템 | done | endTurn(), 타이머, 행동 제한 |
| 승리 조건 시스템 | done | 노크, 와해, 항복, VictoryResult |
| UI/UX 시스템 | done | 메인 메뉴, HUD, 결과 화면, 설정, 반응형, 접근성 |
| 이벤트 시스템 | done | turn:*, general:*, knock:*, game:end |
| 게임 상태 관리 | done | GameState, phase, victoryResult, GameStats |

**결론:** Epic 9 시작을 위한 모든 의존성 충족됨. 다만, Epic 9(멀티플레이어)는 Colyseus 서버 연동이 필요하므로 기술 스파이크가 선행되어야 할 수 있음.

---

## 문서 정보

- **생성일:** 2026-02-14
- **다음 회고:** Epic 9 완료 후
- **Sprint Status 키:** epic-8-retrospective -> done
