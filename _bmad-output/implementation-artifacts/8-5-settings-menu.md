# Story 8.5: ì„¤ì • ë©”ë‰´ (Settings Menu)

Status: done

## Story

As a í”Œë ˆì´ì–´,
I want ê²Œì„ ì¤‘ ë˜ëŠ” ë©”ì¸ ë©”ë‰´ì—ì„œ ì„¤ì • ë©”ë‰´ë¥¼ ì—´ì–´ ì‚¬ìš´ë“œ ON/OFF ë“± ê²Œì„ í™˜ê²½ì„ ì¡°ì ˆí•  ìˆ˜ ìˆê¸°ë¥¼,
so that ê°œì¸ ì„ í˜¸ì— ë§ê²Œ ê²Œì„ í™˜ê²½ì„ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆí•˜ì—¬ ì¾Œì í•˜ê²Œ í”Œë ˆì´í•  ìˆ˜ ìˆë‹¤.

## Acceptance Criteria

1. **AC1: ì„¤ì • ë²„íŠ¼ í‘œì‹œ (ê²Œì„ ì¤‘)** - ê²Œì„ HUDì˜ í•˜ë‹¨ ì¢Œì¸¡ ì˜ì—­(ê¸°ì¡´ ë…¸í¬/ì±…ëµ ë²„íŠ¼ ì˜ì—­)ì— ì„¤ì • ë²„íŠ¼(ê¸°ì–´ ì•„ì´ì½˜)ì´ í‘œì‹œëœë‹¤. ë²„íŠ¼ì€ ê²Œì„ ì§„í–‰ ìƒíƒœì™€ ë¬´ê´€í•˜ê²Œ í•­ìƒ í™œì„±í™”ëœë‹¤(ê²Œì„ ì¢…ë£Œ í›„ì—ë„ ì ‘ê·¼ ê°€ëŠ¥). í„°ì¹˜ íƒ€ê²Ÿì€ ìµœì†Œ 44x44pxì„ ì¶©ì¡±í•œë‹¤.
2. **AC2: ì„¤ì • ë²„íŠ¼ í‘œì‹œ (ë©”ì¸ ë©”ë‰´)** - ë©”ì¸ ë©”ë‰´(StartScreen) í•˜ë‹¨ì— ì„¤ì • ë²„íŠ¼ì´ í‘œì‹œëœë‹¤. í´ë¦­/íƒ­ ì‹œ ì„¤ì • ëª¨ë‹¬ì´ ì—´ë¦°ë‹¤. í„°ì¹˜ íƒ€ê²Ÿì€ ìµœì†Œ 44x44pxì„ ì¶©ì¡±í•œë‹¤.
3. **AC3: ì„¤ì • ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°** - ì„¤ì • ë²„íŠ¼ í´ë¦­ ì‹œ ì„¤ì • ëª¨ë‹¬ì´ í™”ë©´ ì¤‘ì•™ì— í‘œì‹œëœë‹¤. ë‹«ê¸° ë²„íŠ¼(X) ë˜ëŠ” ëª¨ë‹¬ ì™¸ë¶€ ì˜¤ë²„ë ˆì´ í´ë¦­ìœ¼ë¡œ ë‹«ì„ ìˆ˜ ìˆë‹¤. ESC í‚¤ë¡œë„ ë‹«ì„ ìˆ˜ ìˆë‹¤(ë°ìŠ¤í¬í†±). ë‹«ê¸° ë²„íŠ¼ì˜ í„°ì¹˜ íƒ€ê²Ÿì€ ìµœì†Œ 44x44pxì„ ì¶©ì¡±í•œë‹¤.
4. **AC4: ì‚¬ìš´ë“œ ON/OFF í† ê¸€** - ì„¤ì • ëª¨ë‹¬ ë‚´ì— ì‚¬ìš´ë“œ ON/OFF í† ê¸€ ìŠ¤ìœ„ì¹˜ê°€ ìˆë‹¤. í† ê¸€ ë³€ê²½ ì‹œ ì¦‰ì‹œ ë°˜ì˜ëœë‹¤(ì‹¤ì‹œê°„). í˜„ì¬ ìƒíƒœê°€ ì‹œê°ì ìœ¼ë¡œ ëª…í™•íˆ êµ¬ë¶„ëœë‹¤(ON: ì»¬ëŸ¬, OFF: íšŒìƒ‰). ì„¤ì •ì€ LocalStorageì— ì˜ì†í™”ë˜ì–´ ìƒˆë¡œê³ ì¹¨ í›„ì—ë„ ìœ ì§€ëœë‹¤(ê¸°ì¡´ settingsStore í™œìš©).
5. **AC5: ì„¤ì • í•­ëª© í™•ì¥ êµ¬ì¡° (Phase 2 ì¤€ë¹„)** - ì„¤ì • ëª¨ë‹¬ì€ Phase 2ì—ì„œ ì¶”ê°€ë  í•­ëª©(ì§„ë™, ì–¸ì–´, í„´ íƒ€ì´ë¨¸ ì˜µì…˜ ë“±)ì„ ìˆ˜ìš©í•  ìˆ˜ ìˆëŠ” ë¦¬ìŠ¤íŠ¸ êµ¬ì¡°ë¡œ êµ¬í˜„ëœë‹¤. Phase 1ì—ì„œëŠ” ì‚¬ìš´ë“œ í† ê¸€ë§Œ í™œì„±í™”ë˜ê³ , "ì¶”ê°€ ì„¤ì •ì€ ì—…ë°ì´íŠ¸ ì˜ˆì •ì…ë‹ˆë‹¤" ì•ˆë‚´ í…ìŠ¤íŠ¸ê°€ í•˜ë‹¨ì— í‘œì‹œëœë‹¤.
6. **AC6: ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ** - ëª¨ë°”ì¼(320px~430px)ì—ì„œ ëª¨ë‹¬ì´ í™”ë©´ ë„ˆë¹„ì˜ 85%ë¥¼ ì°¨ì§€í•œë‹¤. ë°ìŠ¤í¬í†±(1024px+)ì—ì„œëŠ” ìµœëŒ€ ë„ˆë¹„ 400pxë¡œ í™”ë©´ ì¤‘ì•™ì— í‘œì‹œëœë‹¤. ëª¨ë‹¬ì´ í™”ë©´ ë°–ìœ¼ë¡œ ì˜ë¦¬ì§€ ì•ŠëŠ”ë‹¤.
7. **AC7: ì ‘ê·¼ì„±** - ì„¤ì • ë²„íŠ¼ì— `aria-label="ì„¤ì •"`, ëª¨ë‹¬ì— `role="dialog"`, `aria-label="ê²Œì„ ì„¤ì •"`, `aria-modal="true"`ê°€ ì ìš©ëœë‹¤. ì‚¬ìš´ë“œ í† ê¸€ì— `role="switch"`, `aria-checked`, `aria-label="ì‚¬ìš´ë“œ"`ê°€ ì ìš©ëœë‹¤. ë‹«ê¸° ë²„íŠ¼ì— `aria-label="ì„¤ì • ë‹«ê¸°"`ê°€ ì ìš©ëœë‹¤. ëª¨ë‹¬ ì—´ë¦¼ ì‹œ í¬ì»¤ìŠ¤ê°€ ëª¨ë‹¬ë¡œ ì´ë™í•˜ê³ , ë‹«í˜ ì‹œ ì„¤ì • ë²„íŠ¼ìœ¼ë¡œ í¬ì»¤ìŠ¤ê°€ ë³µê·€í•œë‹¤.
8. **AC8: ê²Œì„ ì¼ì‹œì •ì§€ íš¨ê³¼ ì—†ìŒ** - ì„¤ì • ëª¨ë‹¬ì´ ì—´ë ¤ ìˆì–´ë„ ê²Œì„ íƒ€ì´ë¨¸ëŠ” ê³„ì† ë™ì‘í•œë‹¤(Phase 1ì€ ë¡œì»¬ 2ì¸ ëŒ€ì „ì´ë¯€ë¡œ ì¼ì‹œì •ì§€ ë¶ˆí•„ìš”). ì„¤ì • ëª¨ë‹¬ì€ ê²Œì„ ìƒíƒœì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤.

## Tasks / Subtasks

- [ ] Task 1: game-core ì„¤ì • ê´€ë ¨ íƒ€ì… ë° ìƒìˆ˜ ì •ì˜ (AC: #4, #5)
  - [ ] 1.1 `packages/game-core/src/constants/settings.ts` íŒŒì¼ ìƒì„± - SETTINGS_DEFAULTS (soundEnabled: true), SETTINGS_STORAGE_KEY ('game-settings') ìƒìˆ˜ ì •ì˜
  - [ ] 1.2 `packages/game-core/src/constants/index.ts` ìˆ˜ì • - settings ëª¨ë“ˆ re-export ì¶”ê°€

- [ ] Task 2: SettingsButton ì»´í¬ë„ŒíŠ¸ ìƒì„± (AC: #1, #2, #7)
  - [ ] 2.1 `apps/web/src/components/settings/SettingsButton.tsx` íŒŒì¼ ìƒì„±
  - [ ] 2.2 `apps/web/src/components/settings/SettingsButton.css` íŒŒì¼ ìƒì„± (BEM ë„¤ì´ë°)
  - [ ] 2.3 ê¸°ì–´ ì•„ì´ì½˜(í…ìŠ¤íŠ¸ ê¸°ë°˜: "âš™" ë˜ëŠ” CSS ê¸°ë°˜) + ìµœì†Œ 44x44px í„°ì¹˜ íƒ€ê²Ÿ
  - [ ] 2.4 `onClick` propìœ¼ë¡œ ì„¤ì • ëª¨ë‹¬ ì—´ê¸° ì½œë°± ì—°ê²°
  - [ ] 2.5 `aria-label="ì„¤ì •"` ì ‘ê·¼ì„± ì†ì„± ì ìš©
  - [ ] 2.6 `variant` prop ('game' | 'menu')ìœ¼ë¡œ ê²Œì„ ì¤‘/ë©”ì¸ ë©”ë‰´ ìŠ¤íƒ€ì¼ ë¶„ê¸°

- [ ] Task 3: SettingsModal ì»´í¬ë„ŒíŠ¸ ìƒì„± (AC: #3, #4, #5, #6, #7)
  - [ ] 3.1 `apps/web/src/components/settings/SettingsModal.tsx` íŒŒì¼ ìƒì„±
  - [ ] 3.2 `apps/web/src/components/settings/SettingsModal.css` íŒŒì¼ ìƒì„± (BEM ë„¤ì´ë°)
  - [ ] 3.3 ëª¨ë‹¬ í—¤ë”: "ì„¤ì •" íƒ€ì´í‹€ + ë‹«ê¸° ë²„íŠ¼(X), ë‹«ê¸° ë²„íŠ¼ 44x44px ì´ìƒ
  - [ ] 3.4 ì‚¬ìš´ë“œ í† ê¸€ í–‰: "ì‚¬ìš´ë“œ" ë¼ë²¨ + í† ê¸€ ìŠ¤ìœ„ì¹˜(role="switch", aria-checked)
  - [ ] 3.5 í† ê¸€ ìŠ¤ìœ„ì¹˜: useSettingsStoreì˜ soundEnabled/toggleSound ì—°ë™
  - [ ] 3.6 í•˜ë‹¨ ì•ˆë‚´ í…ìŠ¤íŠ¸: "ì¶”ê°€ ì„¤ì •ì€ ì—…ë°ì´íŠ¸ ì˜ˆì •ì…ë‹ˆë‹¤"
  - [ ] 3.7 `role="dialog"`, `aria-label="ê²Œì„ ì„¤ì •"`, `aria-modal="true"` ì ìš©
  - [ ] 3.8 ëª¨ë‹¬ ì™¸ë¶€ ì˜¤ë²„ë ˆì´ í´ë¦­ ì‹œ ë‹«ê¸°
  - [ ] 3.9 ESC í‚¤ ë‹«ê¸° (keydown ë¦¬ìŠ¤ë„ˆ)
  - [ ] 3.10 í¬ì»¤ìŠ¤ íŠ¸ë©: ì—´ë¦¼ ì‹œ ë‹«ê¸° ë²„íŠ¼ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™, ë‹«í˜ ì‹œ í˜¸ì¶œ ë²„íŠ¼ìœ¼ë¡œ ë³µê·€
  - [ ] 3.11 ë°˜ì‘í˜•: ëª¨ë°”ì¼ width: 85%, ë°ìŠ¤í¬í†± max-width: 400px
  - [ ] 3.12 `createPortal`ë¡œ `document.body`ì— ë Œë”ë§ (z-index: 9997, TacticPanel(9998)/GeneralStatsPanel(9999)ë³´ë‹¤ ì•„ë˜)

- [ ] Task 4: GameCanvas ì—°ë™ - ì„¤ì • ë²„íŠ¼/ëª¨ë‹¬ í†µí•© (AC: #1, #3, #8)
  - [ ] 4.1 GameCanvasì— `isSettingsModalOpen` ìƒíƒœ(useState) ì¶”ê°€
  - [ ] 4.2 `handleSettingsClick`: ëª¨ë‹¬ ì—´ê¸° (isSettingsModalOpen = true)
  - [ ] 4.3 `handleSettingsClose`: ëª¨ë‹¬ ë‹«ê¸° (isSettingsModalOpen = false)
  - [ ] 4.4 SettingsButtonì„ GameHUD leftContent ì˜ì—­ì— ë°°ì¹˜ (ê¸°ì¡´ ë…¸í¬/ì±…ëµ ë²„íŠ¼ê³¼ í•¨ê»˜)
  - [ ] 4.5 SettingsModalì„ ì¡°ê±´ë¶€ ë Œë”ë§ (createPortal)
  - [ ] 4.6 ê²Œì„ íƒ€ì´ë¨¸ì— ì˜í–¥ ì—†ìŒ í™•ì¸ (ëª¨ë‹¬ ì—´ë¦¼/ë‹«í˜ì´ í„´ íƒ€ì´ë¨¸ì— ê°„ì„­í•˜ì§€ ì•ŠìŒ)

- [ ] Task 5: StartScreen ì—°ë™ - ì„¤ì • ë²„íŠ¼/ëª¨ë‹¬ í†µí•© (AC: #2, #3)
  - [ ] 5.1 StartScreenì— `isSettingsOpen` ìƒíƒœ(useState) ì¶”ê°€
  - [ ] 5.2 SettingsButtonì„ StartScreen í•˜ë‹¨ì— ë°°ì¹˜ (variant="menu")
  - [ ] 5.3 SettingsModalì„ ì¡°ê±´ë¶€ ë Œë”ë§
  - [ ] 5.4 ì„¤ì • ë²„íŠ¼ì— ref ì „ë‹¬í•˜ì—¬ í¬ì»¤ìŠ¤ ë³µê·€ ì§€ì›

- [ ] Task 6: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (AC: #1~#8)
  - [ ] 6.1 SettingsButton ê¸°ë³¸ ë Œë”ë§ í…ŒìŠ¤íŠ¸ (ì•„ì´ì½˜ ì¡´ì¬ í™•ì¸)
  - [ ] 6.2 SettingsButton í´ë¦­ ì½œë°± í…ŒìŠ¤íŠ¸ (onClick í˜¸ì¶œ í™•ì¸)
  - [ ] 6.3 SettingsButton ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ (aria-label í™•ì¸)
  - [ ] 6.4 SettingsButton í„°ì¹˜ íƒ€ê²Ÿ í¬ê¸° í…ŒìŠ¤íŠ¸ (44x44px ì´ìƒ)
  - [ ] 6.5 SettingsModal ê¸°ë³¸ ë Œë”ë§ í…ŒìŠ¤íŠ¸ (íƒ€ì´í‹€, í† ê¸€, ë‹«ê¸° ë²„íŠ¼)
  - [ ] 6.6 SettingsModal ì‚¬ìš´ë“œ í† ê¸€ í…ŒìŠ¤íŠ¸ (ON/OFF ì „í™˜, aria-checked ë°˜ì˜)
  - [ ] 6.7 SettingsModal ë‹«ê¸° ë²„íŠ¼ í´ë¦­ í…ŒìŠ¤íŠ¸ (onClose ì½œë°± í˜¸ì¶œ í™•ì¸)
  - [ ] 6.8 SettingsModal ì˜¤ë²„ë ˆì´ í´ë¦­ ë‹«ê¸° í…ŒìŠ¤íŠ¸
  - [ ] 6.9 SettingsModal ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ (role="dialog", aria-label, aria-modal, role="switch")
  - [ ] 6.10 SettingsModal Phase 2 ì•ˆë‚´ í…ìŠ¤íŠ¸ í‘œì‹œ í…ŒìŠ¤íŠ¸
  - [ ] 6.11 SettingsModal isVisible=false ì‹œ ë¯¸ë Œë”ë§ í…ŒìŠ¤íŠ¸
  - [ ] 6.12 game-core settings ìƒìˆ˜ í…ŒìŠ¤íŠ¸ (SETTINGS_DEFAULTS, SETTINGS_STORAGE_KEY ì¡´ì¬ í™•ì¸)

## Dev Notes

### í•µì‹¬ ì•„í‚¤í…ì²˜ íŒ¨í„´

- **UI ë ˆì´ì–´**: React Components (`apps/web/src/components/settings/`) - ì„¤ì • UI ë‹´ë‹¹
- **ìƒíƒœ ê´€ë¦¬**: Zustand settingsStore (`apps/web/src/stores/settingsStore.ts`) - ê¸°ì¡´ ìŠ¤í† ì–´ ì¬ì‚¬ìš©
- **ë°ì´í„° ë ˆì´ì–´**: game-core (`packages/game-core/src/constants/settings.ts`) - ì„¤ì • ìƒìˆ˜/ê¸°ë³¸ê°’ ì •ì˜
- **ë¶„ë¦¬ ì›ì¹™**: ì„¤ì • UIëŠ” React, ì„¤ì • ìƒìˆ˜ëŠ” game-core, ì„¤ì • ìƒíƒœëŠ” Zustand(LocalStorage ì˜ì†í™”)

### Phase 1 ë²”ìœ„ ì œí•œ (ì¤‘ìš”)

**ì´ ìŠ¤í† ë¦¬ëŠ” Epic 8 (UI/UX)ì— ì†í•˜ë©°, Phase 1 ë¡œì»¬ 2ì¸ ëŒ€ì „ì—ì„œ í•„ìš”í•œ ìµœì†Œ ì„¤ì •ë§Œ êµ¬í˜„í•©ë‹ˆë‹¤.**

- Phase 1: ì‚¬ìš´ë“œ ON/OFF í† ê¸€ë§Œ í™œì„±í™”
- Phase 2 ì¶”ê°€ ì˜ˆì •: ì§„ë™ ON/OFF, ì–¸ì–´ ì„ íƒ, í„´ íƒ€ì´ë¨¸ ì˜µì…˜, ì•Œë¦¼ ì„¤ì •
- Phase 3 ì¶”ê°€ ì˜ˆì •: í…Œë§ˆ/ìƒ‰ìƒ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ, ì ‘ê·¼ì„± ê³ ê¸‰ ì˜µì…˜ (ìƒ‰ë§¹ ëª¨ë“œ ë“±)
- ì„¤ì • ëª¨ë‹¬ì€ í™•ì¥ ê°€ëŠ¥í•œ ë¦¬ìŠ¤íŠ¸ êµ¬ì¡°ë¡œ êµ¬í˜„í•˜ì—¬ Phase 2/3ì—ì„œ í•­ëª©ë§Œ ì¶”ê°€í•˜ë©´ ë¨

### ê¸°ì¡´ settingsStore í™œìš©

settingsStoreëŠ” Story 4-6ì—ì„œ ì´ë¯¸ ìƒì„±ë˜ì–´ ì‚¬ìš´ë“œ í† ê¸€ ê¸°ëŠ¥ì´ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```typescript
// apps/web/src/stores/settingsStore.ts (ê¸°ì¡´)
export interface SettingsState {
  soundEnabled: boolean;
  toggleSound: () => void;
  setSound: (enabled: boolean) => void;
}
// LocalStorage 'game-settings' í‚¤ì— ì˜ì†í™”
```

**ì´ ìŠ¤í† ë¦¬ì—ì„œëŠ” settingsStoreë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.** SettingsModalì—ì„œ `useSettingsStore`ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš´ë“œ ìƒíƒœë¥¼ ì½ê³ /ë³€ê²½í•©ë‹ˆë‹¤.

### ê²Œì„ ê·œì¹™ ì°¸ì¡° (06-ui-page-flow.md)

- í™ˆ í™”ë©´(Phase 1 = StartScreen)ì— ì„¤ì • ë²„íŠ¼ ë°°ì¹˜
- ê²Œì„ í™”ë©´ í•˜ë‹¨ì— `[ì„¤ì •]` ë²„íŠ¼ ë°°ì¹˜
- ì„¤ì • ëª¨ë‹¬: ì‚¬ìš´ë“œ, ì–¸ì–´ ë“± (Phase 1ì€ ì‚¬ìš´ë“œë§Œ)

### ë¹„ì£¼ì–¼ ë””ìì¸ ì°¸ê³ 

ê¸°ì¡´ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ìœ ì§€ (SurrenderConfirmModal íŒ¨í„´ ì°¸ì¡°):
- ëª¨ë‹¬ ì˜¤ë²„ë ˆì´: `rgba(0, 0, 0, 0.7)`
- ëª¨ë‹¬ ë°°ê²½: `#2d2d3d` (ê¸°ì¡´ ëª¨ë‹¬ íŒ¨í„´)
- ëª¨ë‹¬ í…Œë‘ë¦¬: `#4a4a5a` (ì¤‘ë¦½ ìƒ‰ìƒ, í•­ë³µ ëª¨ë‹¬ì˜ ë¹¨ê°„ í…Œë‘ë¦¬ì™€ êµ¬ë¶„)
- ëª¨ë‹¬ í…ìŠ¤íŠ¸: `#ffffff`
- íƒ€ì´í‹€ ìƒ‰ìƒ: `#ffd700` (ê¸ˆìƒ‰, ì„¤ì • ê°•ì¡°)
- í† ê¸€ ON ë°°ê²½: `#22c55e` (ì´ˆë¡ìƒ‰, í™œì„±í™”)
- í† ê¸€ OFF ë°°ê²½: `#4a4a5a` (íšŒìƒ‰, ë¹„í™œì„±í™”)
- í† ê¸€ ë…¸ë¸Œ: `#ffffff`
- ì„¤ì • ë²„íŠ¼ (ê²Œì„ ì¤‘): `#4a4a5a` ë°°ê²½, `#ffffff` ì•„ì´ì½˜
- ì„¤ì • ë²„íŠ¼ (ë©”ì¸ ë©”ë‰´): íˆ¬ëª… ë°°ê²½, `#aaa` ì•„ì´ì½˜, í˜¸ë²„ ì‹œ `#ffd700`
- ì•ˆë‚´ í…ìŠ¤íŠ¸: `rgba(255, 255, 255, 0.4)` (íë¦° íšŒìƒ‰)

### ì„¤ì • ë²„íŠ¼ ìœ„ì¹˜ (ê²Œì„ ì¤‘ HUD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  P1: Player 1      í„´ N | 45ì´ˆ      P2: Player 2       â”‚
â”‚  ë…¸í¬: â—â—â—‹       í–‰ë™: â—â—â—‹           ë…¸í¬: â—â—‹â—‹        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚                   [ê²Œì„ ë³´ë“œ ì˜ì—­]                        â”‚
â”‚                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ë…¸í¬] [ì±…ëµ] [âš™]                    [í„´ ì¢…ë£Œ] [í•­ë³µ]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ì„¤ì • ë²„íŠ¼ì€ ì±…ëµ ë²„íŠ¼ ì˜†(ìš°ì¸¡)ì— ë°°ì¹˜
- ê¸°ì¡´ leftContent ì˜ì—­ì˜ flex rowì— ì¶”ê°€

### ì„¤ì • ëª¨ë‹¬ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì„¤ì •                              [X ë‹«ê¸°]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚   ğŸ”Š ì‚¬ìš´ë“œ                    [â”â”â”â—‹ ON ]   â”‚
â”‚                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                              â”‚
â”‚   ì¶”ê°€ ì„¤ì •ì€ ì—…ë°ì´íŠ¸ ì˜ˆì •ì…ë‹ˆë‹¤             â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¤ì • ë²„íŠ¼ ìœ„ì¹˜ (ë©”ì¸ ë©”ë‰´)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              â”‚
â”‚              âš”ï¸ ì˜¤í˜¸ëŒ€ì¥êµ° âš”ï¸                 â”‚
â”‚             äº”è™å¤§å°‡è»                       â”‚
â”‚                                              â”‚
â”‚         ë‹¤ì„¯ ë§¹ì¥ê³¼ í•¨ê»˜ ì²œí•˜ë¥¼ í˜¸ë ¹í•˜ë¼      â”‚
â”‚                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚     ê²Œì„ ì‹œì‘       â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                              â”‚
â”‚             2ì¸ ë¡œì»¬ í”Œë ˆì´                   â”‚
â”‚                                              â”‚
â”‚         [âš™ ì„¤ì •]                             â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì»´í¬ë„ŒíŠ¸ ì˜ì¡´ì„±

```
App
  â”œâ”€â”€ StartScreen
  â”‚    â”œâ”€â”€ SettingsButton (variant="menu")
  â”‚    â””â”€â”€ SettingsModal (ì¡°ê±´ë¶€ ë Œë”ë§)
  â”‚
  â””â”€â”€ GameCanvas
       â”œâ”€â”€ GameHUD
       â”‚    â”œâ”€â”€ topContent: PlayerInfoBar (ê¸°ì¡´)
       â”‚    â”œâ”€â”€ topRightContent: SurrenderButton (ê¸°ì¡´)
       â”‚    â”œâ”€â”€ leftContent:
       â”‚    â”‚    â”œâ”€â”€ KnockButton (ê¸°ì¡´)
       â”‚    â”‚    â”œâ”€â”€ TacticButton (ê¸°ì¡´)
       â”‚    â”‚    â””â”€â”€ SettingsButton (ìƒˆë¡œ ìƒì„±, variant="game")
       â”‚    â””â”€â”€ children: TurnEndButton (ê¸°ì¡´)
       â”‚
       â”œâ”€â”€ SettingsModal (createPortal, ì¡°ê±´ë¶€ ë Œë”ë§)
       â”‚    â”œâ”€â”€ í—¤ë”: "ì„¤ì •" + ë‹«ê¸° ë²„íŠ¼
       â”‚    â”œâ”€â”€ ì‚¬ìš´ë“œ í† ê¸€ í–‰
       â”‚    â””â”€â”€ Phase 2 ì•ˆë‚´ í…ìŠ¤íŠ¸
       â”‚
       â”œâ”€â”€ TacticPanel (ê¸°ì¡´, createPortal)
       â”œâ”€â”€ SurrenderConfirmModal (ê¸°ì¡´)
       â””â”€â”€ GeneralStatsPanel (ê¸°ì¡´, createPortal)
```

### z-index ì •ë¦¬

| ë ˆì´ì–´ | z-index | ì»´í¬ë„ŒíŠ¸ |
|--------|---------|----------|
| ê²Œì„ ìº”ë²„ìŠ¤ | 1 | Phaser canvas |
| ê²Œì„ HUD | 100 | GameHUD |
| í•­ë³µ í™•ì¸ ëª¨ë‹¬ | 150 | SurrenderConfirmModal |
| ìŠ¹ë¦¬ ë°°ë„ˆ | 1000 | VictoryBanner |
| **ì„¤ì • ëª¨ë‹¬** | **9997** | **SettingsModal (ìƒˆë¡œ ìƒì„±)** |
| ì±…ëµ íŒ¨ë„ | 9998 | TacticPanel |
| ì¥ìˆ˜ ì •ë³´ íŒ¨ë„ | 9999 | GeneralStatsPanel |

ì„¤ì • ëª¨ë‹¬ì€ ê²Œì„ ì¤‘ ì ‘ê·¼í•˜ëŠ” ìœ í‹¸ë¦¬í‹°ì´ë¯€ë¡œ TacticPanelë³´ë‹¤ ì•„ë˜ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤. ì¥ìˆ˜ ì •ë³´ íŒ¨ë„ê³¼ ì±…ëµ íŒ¨ë„ì´ ë” ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.

### ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©/ìˆ˜ì • ëŒ€ìƒ

| ì»´í¬ë„ŒíŠ¸ | ì•¡ì…˜ |
|---------|------|
| `GameCanvas.tsx` | ìˆ˜ì • (isSettingsModalOpen ìƒíƒœ ì¶”ê°€, SettingsButton/SettingsModal ì—°ê²°) |
| `StartScreen.tsx` | ìˆ˜ì • (SettingsButton ì¶”ê°€, SettingsModal ì¡°ê±´ë¶€ ë Œë”ë§) |
| `SettingsButton.tsx` | **ìƒˆë¡œ ìƒì„±** |
| `SettingsButton.css` | **ìƒˆë¡œ ìƒì„±** |
| `SettingsModal.tsx` | **ìƒˆë¡œ ìƒì„±** |
| `SettingsModal.css` | **ìƒˆë¡œ ìƒì„±** |

### game-core íŒŒì¼ ë³€ê²½

| íŒŒì¼ | ì•¡ì…˜ |
|------|------|
| `packages/game-core/src/constants/settings.ts` | **ìƒˆë¡œ ìƒì„±** (SETTINGS_DEFAULTS, SETTINGS_STORAGE_KEY) |
| `packages/game-core/src/constants/index.ts` | ìˆ˜ì • (settings export ì¶”ê°€) |

### Project Structure Notes

- ì‹ ê·œ íŒŒì¼ (game-core): `packages/game-core/src/constants/settings.ts`
- ì‹ ê·œ íŒŒì¼ (web): `apps/web/src/components/settings/SettingsButton.tsx`, `SettingsButton.css`, `SettingsModal.tsx`, `SettingsModal.css`
- ìˆ˜ì • íŒŒì¼: `apps/web/src/components/game/GameCanvas.tsx` (ìƒíƒœ + SettingsButton/SettingsModal ì¶”ê°€)
- ìˆ˜ì • íŒŒì¼: `apps/web/src/components/menu/StartScreen.tsx` (SettingsButton + SettingsModal ì¶”ê°€)
- ìˆ˜ì • íŒŒì¼: `packages/game-core/src/constants/index.ts` (settings re-export)
- ê¸°ì¡´ `stores/settingsStore.ts`ëŠ” ìˆ˜ì •í•˜ì§€ ì•ŠìŒ (ê·¸ëŒ€ë¡œ í™œìš©)

### í…ŒìŠ¤íŠ¸ í‘œì¤€

- í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬: Vitest + React Testing Library
- í…ŒìŠ¤íŠ¸ ìœ„ì¹˜: `apps/web/tests/` ë””ë ‰í† ë¦¬ (8-1, 8-2, 8-3, 8-4 íŒ¨í„´ ë”°ë¦„)
- íŒŒì¼ëª…: `settings-button.test.tsx`, `settings-modal.test.tsx`
- game-core í…ŒìŠ¤íŠ¸: `packages/game-core/tests/settings-constants.test.ts`
- E2E: Playwright (`npx playwright test`)

### Phase 2 í™•ì¥ ì‹œ ë³€ê²½ ì˜ˆìƒ ì§€ì 

- settingsStoreì— vibrationEnabled, language, turnTimerOption ë“± ì¶”ê°€
- SettingsModalì— ìƒˆ í† ê¸€/ì…€ë ‰íŠ¸ í–‰ ì¶”ê°€ (ë¦¬ìŠ¤íŠ¸ êµ¬ì¡°ì´ë¯€ë¡œ í–‰ë§Œ ì¶”ê°€)
- game-core SETTINGS_DEFAULTSì— ìƒˆ ê¸°ë³¸ê°’ ì¶”ê°€
- ì•ˆë‚´ í…ìŠ¤íŠ¸ ì œê±° ë˜ëŠ” ì¶•ì†Œ

### íŒ€ í•©ì˜ ì‚¬í•­ ì¤€ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] game-coreì— Phaser ì˜ì¡´ì„± ì ˆëŒ€ ê¸ˆì§€ (settings ìƒìˆ˜ëŠ” ìˆœìˆ˜ TypeScript)
- [ ] ìƒˆ ìƒìˆ˜/íƒ€ì…ì€ game-coreì— ë¨¼ì € ì •ì˜ (SETTINGS_DEFAULTS, SETTINGS_STORAGE_KEY)
- [ ] ARIA ì†ì„± ëª¨ë“  UI ì»´í¬ë„ŒíŠ¸ì— ì ìš© (SettingsButton, SettingsModal, í† ê¸€ ìŠ¤ìœ„ì¹˜)
- [ ] í„°ì¹˜ íƒ€ê²Ÿ 44x44px ì´ìƒ (SettingsButton, ë‹«ê¸° ë²„íŠ¼, í† ê¸€ ìŠ¤ìœ„ì¹˜)
- [ ] ë‹¨ì¼ íŒŒì¼ 1,000ì¤„ ì´ˆê³¼ ì‹œ ë¶„ë¦¬ ê²€í†  í•„ìˆ˜
- [ ] ìŠ¤í† ë¦¬ ì™„ë£Œ ì‹œ Dev Notesì— í•™ìŠµ ë‚´ìš© ê¸°ë¡
- [ ] ìŠ¤í† ë¦¬ ì™„ë£Œ ì»¤ë°‹ ì‹œ sprint-status.yaml ë™ì‹œ ì—…ë°ì´íŠ¸ í•„ìˆ˜
- [ ] ë˜ëŒë¦´ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì í–‰ë™ì—ëŠ” í™•ì¸ ëª¨ë‹¬ í•„ìˆ˜ (í•´ë‹¹ ì—†ìŒ - ì„¤ì •ì€ ì¦‰ì‹œ í† ê¸€/ë˜ëŒë¦¬ê¸° ê°€ëŠ¥)
- [ ] ë„ë©”ì¸ ìš©ì–´ëŠ” ê²Œì„ ê·œì¹™ ë¬¸ì„œ ì •ì˜ë¥¼ ì •í™•íˆ ë”°ë¦„
- [ ] ê²Œì„ ë£¨í”„ ë‚´ new ì‚¬ìš© ê¸ˆì§€ (ê°ì²´ ì¬ì‚¬ìš©)

### References

- [Source: _bmad-output/epics.md - Epic 8, Story 5 (UI-005)]
- [Source: docs/project-plan/06-ui-page-flow.md - Section 2.5 (ê²Œì„ í™”ë©´, ì„¤ì • ë²„íŠ¼)]
- [Source: docs/project-plan/06-ui-page-flow.md - Section 2.1 (í™ˆ í™”ë©´, ì„¤ì • ë²„íŠ¼)]
- [Source: _bmad-output/game-architecture.md - Project Structure, Cross-cutting Concerns (Audio)]
- [Source: _bmad-output/gdd.md - Audio Architecture (ì‚¬ìš´ë“œ ì„¤ì •)]
- [Source: apps/web/src/stores/settingsStore.ts - ê¸°ì¡´ ì„¤ì • ìŠ¤í† ì–´ (soundEnabled)]
- [Source: apps/web/src/components/game/GameCanvas.tsx - ê²Œì„ ìº”ë²„ìŠ¤ êµ¬ì¡°, settingsStore ì—°ë™]
- [Source: apps/web/src/components/game/GameHUD.tsx - HUD ì»¨í…Œì´ë„ˆ ë ˆì´ì•„ì›ƒ]
- [Source: apps/web/src/components/menu/StartScreen.tsx - ë©”ì¸ ë©”ë‰´ êµ¬ì¡°]
- [Source: apps/web/src/components/game/SurrenderConfirmModal.tsx - ëª¨ë‹¬ ì ‘ê·¼ì„± íŒ¨í„´ ì°¸ê³ ]
- [Source: apps/web/src/components/game/SurrenderConfirmModal.css - ëª¨ë‹¬ CSS íŒ¨í„´ ì°¸ê³ ]
- [Source: apps/web/src/components/game/TacticPanel.tsx - createPortal íŒ¨í„´ ì°¸ê³ ]
- [Source: _bmad-output/implementation-artifacts/8-4-tactic-selection-ui.md - ì´ì „ ìŠ¤í† ë¦¬ íŒ¨í„´ ì°¸ê³ ]
- [Source: _bmad-output/implementation-artifacts/epic-6-retro-2026-02-12.md - íŒ€ í•©ì˜ ì‚¬í•­]
